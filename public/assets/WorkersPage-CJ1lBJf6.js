import{a as C,j as e,u as Y,b as ee,o as T,c as se,s as _,d as te,n as re}from"./index-CkRMB4nC.js";import{b as l,L as $}from"./vendor-Clbca2a1.js";import{C as ae}from"./calendar-6vummjVo.js";import{f as H}from"./format-BqWGv6kL.js";import{p as P}from"./parseISO-DAzH-w3Y.js";import{L as ie,C as le}from"./LoadingSpinner-BLjtC4YK.js";import{E as ne}from"./ErrorMessage-T4nvaIRT.js";import{E as oe}from"./EmptyState-D--Osgz_.js";import{B as ce}from"./BulkAssignModal-BQy76iJ-.js";import{U as de}from"./users-CyY_3fZx.js";import"./createLucideIcon-3h5MTQgh.js";import"./ErrorMessage-BJNYAG4K.js";import"./circle-alert-CTHc8KB9.js";import"./x-BVsZF-Y_.js";import"./chevron-right-CWS8j0Ws.js";import"./clock-BFS8HtoJ.js";function me(s={}){const[i,n]=l.useState([]),[t,h]=l.useState(!0),[d,m]=l.useState(null),p=async()=>{try{h(!0),m(null);const x=await C.getWorkers({});x.status==="success"&&n(x.data.workers)}catch(x){const a=x.response?.data?.error||"Failed to load workers";m(a),console.error("Workers fetch error:",x)}finally{h(!1)}};l.useEffect(()=>{p()},[]);const g=l.useMemo(()=>{let x=[...i];if(s.status==="active"?x=x.filter(a=>a.active):s.status==="inactive"&&(x=x.filter(a=>!a.active)),s.search&&s.search.trim()){const a=s.search.toLowerCase().trim();x=x.filter(o=>!!(`${o.first_name||""} ${o.last_name||""}`.toLowerCase().includes(a)||o.email&&o.email.toLowerCase().includes(a)||o.phone&&o.phone.toLowerCase().includes(a)||o.skills_json&&(Array.isArray(o.skills_json)?o.skills_json:typeof o.skills_json=="string"?JSON.parse(o.skills_json):[]).some(c=>c&&c.toLowerCase().includes(a))||o.certifications&&Array.isArray(o.certifications)&&o.certifications.some(b=>b&&b.name&&b.name.toLowerCase().includes(a))))}return x},[i,s.search,s.status]);return{workers:i,filteredWorkers:g,isLoading:t,error:d,refetch:p}}function xe({search:s,status:i,onSearchChange:n,onStatusChange:t,onAddClick:h}){return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:s,onChange:d=>n(d.target.value),placeholder:"Search workers by name, skill, or certification...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:i,onChange:d=>t(d.target.value),className:"block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"all",children:"All Workers"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]}),e.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Add Worker"})]})]})]})}function ue({workers:s,onEdit:i,onDelete:n}){return e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Skills"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[t.first_name," ",t.last_name]}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.phone})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.skills_json&&t.skills_json.length>0?e.jsxs(e.Fragment,{children:[t.skills_json.slice(0,3).map((h,d)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:h},d)),t.skills_json.length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",t.skills_json.length-3," more"]})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"No skills"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx($,{to:`/workers/${t.id}/schedule`,className:"text-green-600 hover:text-green-700 text-sm mr-3",children:"Schedule"}),e.jsx($,{to:`/workers/${t.id}`,className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),e.jsx("button",{onClick:()=>i(t),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>n(t),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},t.id))})]})})})}const he=T({first_name:_().min(1,"First name is required"),last_name:_().min(1,"Last name is required"),email:_().email("Invalid email address"),phone:_().min(10,"Phone must be at least 10 digits"),active:te(),skills:_().min(1,"At least one skill required"),certifications:se(T({certification_id:re(),expires_at_utc:_().optional()})).optional()});function R({worker:s,onSubmit:i,onCancel:n,isSubmitting:t}){const[h,d]=l.useState([]),[m,p]=l.useState([]),{register:g,handleSubmit:x,formState:{errors:a}}=Y({resolver:ee(he),defaultValues:s?{first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,active:s.active,skills:s.skills_json.join(", "),certifications:[]}:{active:!0,certifications:[]}});l.useEffect(()=>{o()},[]);const o=async()=>{try{const r=await C.getCertifications();d(r.data.certifications||[])}catch(r){console.error("Error loading certifications:",r)}},W=async r=>{const f=r.skills.split(",").map(u=>u.trim()).filter(u=>u.length>0);await i({...r,skills_json:f,certifications:m})},b=r=>{h.find(u=>u.id===r)&&!m.find(u=>u.certification_id===r)&&p([...m,{certification_id:r,expires_at_utc:new Date(Date.now()+365*24*60*60*1e3).toISOString()}])},c=r=>{p(m.filter(f=>f.certification_id!==r))},k=(r,f)=>{p(m.map(u=>u.certification_id===r?{...u,expires_at_utc:f}:u))};return e.jsxs("form",{onSubmit:x(W),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700",children:"First Name *"}),e.jsx("input",{id:"first_name",type:"text",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${a.first_name?"border-red-500":""}`,...g("first_name")}),a.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.first_name.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:"Last Name *"}),e.jsx("input",{id:"last_name",type:"text",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${a.last_name?"border-red-500":""}`,...g("last_name")}),a.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.last_name.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email *"}),e.jsx("input",{id:"email",type:"email",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${a.email?"border-red-500":""}`,...g("email")}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone *"}),e.jsx("input",{id:"phone",type:"tel",placeholder:"(555) 123-4567",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${a.phone?"border-red-500":""}`,...g("phone")}),a.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.phone.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"skills",className:"block text-sm font-medium text-gray-700",children:"Skills * (comma-separated)"}),e.jsx("input",{id:"skills",type:"text",placeholder:"Server, Bartender, Host",className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${a.skills?"border-red-500":""}`,...g("skills")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter skills separated by commas (e.g., Server, Bartender, Host)"}),a.skills&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.skills.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Certifications (Optional)"}),e.jsx("div",{className:"mb-4",children:e.jsxs("select",{onChange:r=>{r.target.value&&(b(parseInt(r.target.value)),r.target.value="")},className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Select a certification to add..."}),h.filter(r=>!m.find(f=>f.certification_id===r.id)).map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})}),m.length>0&&e.jsx("div",{className:"space-y-2",children:m.map(r=>{const f=h.find(u=>u.id===r.certification_id);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:f?.name}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"date",value:r.expires_at_utc?r.expires_at_utc.split("T")[0]:"",onChange:u=>k(r.certification_id,u.target.value+"T23:59:59Z"),className:"text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-blue-500 focus:border-blue-500"})})]}),e.jsx("button",{type:"button",onClick:()=>c(r.certification_id),className:"text-red-600 hover:text-red-800 p-1",children:"âœ•"})]},r.certification_id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"active",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",...g("active")}),e.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm font-medium text-gray-700",children:"Active Worker"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Uncheck to deactivate this worker"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:n,disabled:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:t,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:t?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):s?"Update Worker":"Add Worker"})]})]})}function fe({worker:s}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs($,{to:`/workers/${s.id}/schedule`,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ae,{className:"h-4 w-4"}),"View Schedule"]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Basic Information"}),e.jsxs("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[s.first_name," ",s.last_name]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("dd",{className:"mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.active?"Active":"Inactive"})})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.email})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Added"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:H(P(s.created_at),"MMM d, yyyy")})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.skills_json&&s.skills_json.length>0?s.skills_json.map((i,n)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:i},n)):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No skills added"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Certifications"}),s.certifications&&s.certifications.length>0?e.jsx("div",{className:"space-y-2",children:s.certifications.map(i=>{const n=s.worker_certifications?.find(t=>t.certification_id===i.id);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:i.name}),n?.expires_at_utc&&e.jsxs("span",{className:"text-sm text-gray-500",children:["Expires: ",H(P(n.expires_at_utc),"MMM d, yyyy")]})]},i.id)})}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No certifications"})]})]})}function B({isOpen:s,onClose:i,title:n,children:t,size:h="md"}){const d=l.useRef(null);if(l.useEffect(()=>{const p=g=>{g.key==="Escape"&&i()};return s&&(document.addEventListener("keydown",p),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",p),document.body.style.overflow="unset"}},[s,i]),!s)return null;const m={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{ref:d,className:`relative bg-white rounded-lg shadow-xl w-full ${m[h]} max-h-[90vh] flex flex-col`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-500 transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:t})]})})]})}function pe({message:s,type:i,isVisible:n,onClose:t}){if(l.useEffect(()=>{if(n){const m=setTimeout(()=>{t()},3e3);return()=>clearTimeout(m)}},[n,t]),!n)return null;const h={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"},d={success:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),info:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})};return e.jsx("div",{className:"fixed bottom-4 right-4 z-50 animate-slide-up",children:e.jsxs("div",{className:`${h[i]} text-white px-6 py-4 rounded-lg shadow-lg flex items-center space-x-3 min-w-[300px]`,children:[d[i],e.jsx("span",{className:"flex-1",children:s}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}function Fe(){const[s,i]=l.useState(""),[n,t]=l.useState("all"),[h,d]=l.useState(!1),[m,p]=l.useState(!1),[g,x]=l.useState(!1),[a,o]=l.useState(!1),[W,b]=l.useState(!1),[c,k]=l.useState(null),[r,f]=l.useState(!1),[u,D]=l.useState(!1),[L,w]=l.useState(null),[A,N]=l.useState(null),{workers:S,filteredWorkers:E,isLoading:U,error:O,refetch:M}=me({search:s,status:n}),z=l.useMemo(()=>{const j=S.length,y=S.filter(F=>F.active).length,v=S.filter(F=>!F.active).length;return{total:j,active:y,inactive:v}},[S]),q=()=>{k(null),w(null),d(!0)},V=j=>{k(j),w(null),p(!0)},G=j=>{k(j),o(!0)},J=async j=>{try{f(!0),w(null);const{certifications:y,...v}=j,Q=(await C.createWorker(v)).data.worker.id;if(y&&y.length>0)for(const I of y)try{await C.addCertificationToWorker(Q,{certification_id:I.certification_id,expires_at_utc:I.expires_at_utc})}catch(X){console.error("Error adding certification:",X)}d(!1),M(),N({message:"Worker added successfully!",type:"success"})}catch(y){const v=y.response?.data?.error||"Failed to create worker";w(v),N({message:v,type:"error"})}finally{f(!1)}},Z=async j=>{if(c)try{f(!0),w(null),await C.updateWorker(c.id,j),p(!1),M(),N({message:"Worker updated successfully!",type:"success"})}catch(y){const v=y.response?.data?.error||"Failed to update worker";w(v),N({message:v,type:"error"})}finally{f(!1)}},K=async()=>{if(c)try{D(!0),await C.updateWorker(c.id,{active:!1}),o(!1),k(null),M(),N({message:`${c.first_name} ${c.last_name} has been deactivated successfully!`,type:"success"})}catch(j){const y=j.response?.data?.error||"Failed to delete worker";N({message:y,type:"error"})}finally{D(!1)}};return U?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(ie,{size:"lg"})}):O?e.jsx(ne,{message:O,onRetry:M}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Workers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your workforce directory"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"btn-green flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),"Bulk Assign"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Workers"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:z.total})]}),e.jsx("div",{className:"p-3 rounded-lg bg-blue-50 text-blue-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-green-600",children:z.active})]}),e.jsx("div",{className:"p-3 rounded-lg bg-green-50 text-green-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inactive"}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-600",children:z.inactive})]}),e.jsx("div",{className:"p-3 rounded-lg bg-gray-50 text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})})]})})]}),e.jsx(xe,{search:s,status:n,onSearchChange:i,onStatusChange:t,onAddClick:q}),E.length>0?e.jsxs(e.Fragment,{children:[e.jsx(ue,{workers:E,onEdit:V,onDelete:G}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",E.length," worker",E.length!==1?"s":"",s&&e.jsxs("span",{className:"text-blue-600 ml-1",children:["(filtered from ",S.length," total)"]})]})]}):e.jsx(oe,{title:"No Workers Found",description:s||n!=="all"?"Try adjusting your search or filters":"Get started by adding your first worker",icon:e.jsx("svg",{className:"h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsxs(B,{isOpen:h,onClose:()=>d(!1),title:"Add New Worker",size:"lg",children:[L&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:L})}),e.jsx(R,{onSubmit:J,onCancel:()=>d(!1),isSubmitting:r})]}),e.jsxs(B,{isOpen:m,onClose:()=>p(!1),title:"Edit Worker",size:"lg",children:[L&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:L})}),e.jsx(R,{worker:c,onSubmit:Z,onCancel:()=>p(!1),isSubmitting:r})]}),e.jsx(B,{isOpen:g,onClose:()=>x(!1),title:c?`${c.first_name} ${c.last_name}`:"Worker Details",size:"lg",children:c&&e.jsx(fe,{worker:c})}),e.jsx(le,{isOpen:a,onClose:()=>o(!1),onConfirm:K,title:"Delete Worker",message:c?`Are you sure you want to delete ${c.first_name} ${c.last_name}? This action cannot be undone.`:"Are you sure you want to delete this worker?",confirmText:"Delete",cancelText:"Cancel",isLoading:u}),A&&e.jsx(pe,{message:A.message,type:A.type,isVisible:!!A,onClose:()=>N(null)}),W&&e.jsx(ce,{onClose:()=>b(!1),onSuccess:()=>{M(),b(!1)}})]})}export{Fe as WorkersPage};
