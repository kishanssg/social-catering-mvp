{"version":3,"file":"api.js","sources":["../../../social-catering-ui/social-catering-ui/src/services/api.ts"],"sourcesContent":["import axios, { type AxiosInstance, type AxiosResponse } from 'axios';\nimport type { ApiResponse, LoginCredentials, AuthUser } from '../types';\n\n// API Configuration\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000/api/v1';\n\n// Create axios instance\nconst apiClient: AxiosInstance = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  withCredentials: true, // Important for session cookies\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  },\n});\n\n// Request interceptor\napiClient.interceptors.request.use(\n  (config) => {\n    // Add any auth headers here if needed\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor\napiClient.interceptors.response.use(\n  (response: AxiosResponse) => {\n    return response;\n  },\n  (error) => {\n    // Handle common errors\n    if (error.response?.status === 401) {\n      // Unauthorized - redirect to login\n      window.location.href = '/login';\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// API Service class\nclass ApiService {\n  // Auth endpoints\n  async login(credentials: LoginCredentials): Promise<ApiResponse<AuthUser>> {\n    const response = await apiClient.post('/users/sign_in', { user: credentials });\n    return response.data;\n  }\n\n  async logout(): Promise<ApiResponse> {\n    const response = await apiClient.delete('/users/sign_out');\n    return response.data;\n  }\n\n  // Health check\n  async healthCheck(): Promise<ApiResponse> {\n    const response = await apiClient.get('/healthz');\n    return response.data;\n  }\n\n  // Dashboard\n  async getDashboard(): Promise<ApiResponse> {\n    const response = await apiClient.get('/dashboard');\n    return response.data;\n  }\n\n  // Workers\n  async getWorkers(params?: any): Promise<ApiResponse> {\n    const response = await apiClient.get('/workers', { params });\n    return response.data;\n  }\n\n  async getWorker(id: number): Promise<ApiResponse> {\n    const response = await apiClient.get(`/workers/${id}`);\n    return response.data;\n  }\n\n  async createWorker(data: any): Promise<ApiResponse> {\n    const response = await apiClient.post('/workers', data);\n    return response.data;\n  }\n\n  async updateWorker(id: number, data: any): Promise<ApiResponse> {\n    const response = await apiClient.put(`/workers/${id}`, data);\n    return response.data;\n  }\n\n  // Shifts\n  async getShifts(params?: any): Promise<ApiResponse> {\n    const response = await apiClient.get('/shifts', { params });\n    return response.data;\n  }\n\n  async getShift(id: number): Promise<ApiResponse> {\n    const response = await apiClient.get(`/shifts/${id}`);\n    return response.data;\n  }\n\n  async createShift(data: any): Promise<ApiResponse> {\n    const response = await apiClient.post('/shifts', data);\n    return response.data;\n  }\n\n  async updateShift(id: number, data: any): Promise<ApiResponse> {\n    const response = await apiClient.put(`/shifts/${id}`, data);\n    return response.data;\n  }\n\n  async deleteShift(id: number): Promise<ApiResponse> {\n    const response = await apiClient.delete(`/shifts/${id}`);\n    return response.data;\n  }\n\n  // Assignments\n  async getAssignments(params?: any): Promise<ApiResponse> {\n    const response = await apiClient.get('/assignments', { params });\n    return response.data;\n  }\n\n  async createAssignment(data: any): Promise<ApiResponse> {\n    const response = await apiClient.post('/assignments', data);\n    return response.data;\n  }\n\n  async updateAssignment(id: number, data: any): Promise<ApiResponse> {\n    const response = await apiClient.put(`/assignments/${id}`, data);\n    return response.data;\n  }\n\n  async deleteAssignment(id: number): Promise<ApiResponse> {\n    const response = await apiClient.delete(`/assignments/${id}`);\n    return response.data;\n  }\n\n  // Certifications\n  async getCertifications(): Promise<ApiResponse> {\n    const response = await apiClient.get('/certifications');\n    return response.data;\n  }\n\n  // Activity Logs\n  async getActivityLogs(params?: any): Promise<ApiResponse> {\n    const response = await apiClient.get('/activity_logs', { params });\n    return response.data;\n  }\n}\n\n// Export singleton instance\nexport const apiService = new ApiService();\nexport default apiClient;\n"],"names":["API_BASE_URL","apiClient","axios","config","error","response","ApiService","credentials","params","id","data","apiService"],"mappings":"qCAIA,MAAMA,EAAe,2DAGfC,EAA2BC,EAAM,OAAO,CAC5C,QAASF,EACT,QAAS,IACT,gBAAiB,GACjB,QAAS,CACP,eAAgB,mBAChB,OAAU,kBAAA,CAEd,CAAC,EAGDC,EAAU,aAAa,QAAQ,IAC5BE,GAEQA,EAERC,GACQ,QAAQ,OAAOA,CAAK,CAE/B,EAGAH,EAAU,aAAa,SAAS,IAC7BI,GACQA,EAERD,IAEKA,EAAM,UAAU,SAAW,MAE7B,OAAO,SAAS,KAAO,UAGlB,QAAQ,OAAOA,CAAK,EAE/B,EAGA,MAAME,CAAW,CAEf,MAAM,MAAMC,EAA+D,CAEzE,OADiB,MAAMN,EAAU,KAAK,iBAAkB,CAAE,KAAMM,EAAa,GAC7D,IAClB,CAEA,MAAM,QAA+B,CAEnC,OADiB,MAAMN,EAAU,OAAO,iBAAiB,GACzC,IAClB,CAGA,MAAM,aAAoC,CAExC,OADiB,MAAMA,EAAU,IAAI,UAAU,GAC/B,IAClB,CAGA,MAAM,cAAqC,CAEzC,OADiB,MAAMA,EAAU,IAAI,YAAY,GACjC,IAClB,CAGA,MAAM,WAAWO,EAAoC,CAEnD,OADiB,MAAMP,EAAU,IAAI,WAAY,CAAE,OAAAO,EAAQ,GAC3C,IAClB,CAEA,MAAM,UAAUC,EAAkC,CAEhD,OADiB,MAAMR,EAAU,IAAI,YAAYQ,CAAE,EAAE,GACrC,IAClB,CAEA,MAAM,aAAaC,EAAiC,CAElD,OADiB,MAAMT,EAAU,KAAK,WAAYS,CAAI,GACtC,IAClB,CAEA,MAAM,aAAaD,EAAYC,EAAiC,CAE9D,OADiB,MAAMT,EAAU,IAAI,YAAYQ,CAAE,GAAIC,CAAI,GAC3C,IAClB,CAGA,MAAM,UAAUF,EAAoC,CAElD,OADiB,MAAMP,EAAU,IAAI,UAAW,CAAE,OAAAO,EAAQ,GAC1C,IAClB,CAEA,MAAM,SAASC,EAAkC,CAE/C,OADiB,MAAMR,EAAU,IAAI,WAAWQ,CAAE,EAAE,GACpC,IAClB,CAEA,MAAM,YAAYC,EAAiC,CAEjD,OADiB,MAAMT,EAAU,KAAK,UAAWS,CAAI,GACrC,IAClB,CAEA,MAAM,YAAYD,EAAYC,EAAiC,CAE7D,OADiB,MAAMT,EAAU,IAAI,WAAWQ,CAAE,GAAIC,CAAI,GAC1C,IAClB,CAEA,MAAM,YAAYD,EAAkC,CAElD,OADiB,MAAMR,EAAU,OAAO,WAAWQ,CAAE,EAAE,GACvC,IAClB,CAGA,MAAM,eAAeD,EAAoC,CAEvD,OADiB,MAAMP,EAAU,IAAI,eAAgB,CAAE,OAAAO,EAAQ,GAC/C,IAClB,CAEA,MAAM,iBAAiBE,EAAiC,CAEtD,OADiB,MAAMT,EAAU,KAAK,eAAgBS,CAAI,GAC1C,IAClB,CAEA,MAAM,iBAAiBD,EAAYC,EAAiC,CAElE,OADiB,MAAMT,EAAU,IAAI,gBAAgBQ,CAAE,GAAIC,CAAI,GAC/C,IAClB,CAEA,MAAM,iBAAiBD,EAAkC,CAEvD,OADiB,MAAMR,EAAU,OAAO,gBAAgBQ,CAAE,EAAE,GAC5C,IAClB,CAGA,MAAM,mBAA0C,CAE9C,OADiB,MAAMR,EAAU,IAAI,iBAAiB,GACtC,IAClB,CAGA,MAAM,gBAAgBO,EAAoC,CAExD,OADiB,MAAMP,EAAU,IAAI,iBAAkB,CAAE,OAAAO,EAAQ,GACjD,IAClB,CACF,CAGO,MAAMG,EAAa,IAAIL"}