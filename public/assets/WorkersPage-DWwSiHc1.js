import{j as e,u as Z,a as D}from"./index-CHlUjhV3.js";import{r as a,a as q,c as H}from"./vendor-Z5FP5jVZ.js";import{L as O}from"./LoadingSpinner-BGFu4S-a.js";import{c as Q}from"./createLucideIcon-VuOQmetB.js";import{X as F,P as X}from"./x-Ie4PY792.js";import{C as U,X as V,B as J}from"./x-circle-C8GLSxPl.js";import{S as Y,T as G}from"./trash-2-BVeOl9Zs.js";import{U as ee}from"./user-Ca9CpMWS.js";import{C as K}from"./calendar-CzLs7Meh.js";import{P as se}from"./pen-square-B2Diqmyv.js";import{f as P,C as te}from"./index-DM8BBHfE.js";import{p as L}from"./index-CrQ3XRgF.js";import{M as ae}from"./map-pin-CqRl3AqD.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=Q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=Q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function ne({isOpen:r,onClose:m,onConfirm:u,title:w,message:b,confirmText:n="Delete",cancelText:y="Cancel",isLoading:i=!1,isDestructive:j=!0,workerName:f}){const k=a.useRef(null),h=a.useRef(null);a.useEffect(()=>(r?(h.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{var c;(c=k.current)==null||c.focus()},0)):(document.body.style.overflow="unset",h.current&&h.current.focus()),()=>{document.body.style.overflow="unset"}),[r]),a.useEffect(()=>{const c=S=>{r&&S.key==="Escape"&&m()};return r&&document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[r,m]);const g=c=>{c.target===c.currentTarget&&m()};return r?q.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},onClick:g,children:[e.jsxs("div",{ref:k,className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",tabIndex:-1,style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(0, 0, 0, 0.05)",animation:"modalSlideIn 0.2s ease-out"},children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[j&&e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-orange-50 border border-orange-200",children:e.jsx(re,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{id:"modal-title",className:"text-xl font-bold font-manrope text-gray-900 leading-tight",children:w}),e.jsx("p",{className:"text-sm text-gray-500 font-manrope mt-1",children:j?"This action cannot be undone":"Please confirm your action"})]})]}),e.jsx("button",{onClick:m,className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200",disabled:i,children:e.jsx(F,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-6",children:e.jsxs("p",{id:"modal-description",className:"text-gray-700 font-manrope leading-relaxed text-base",children:[b,f&&e.jsxs("span",{className:"font-bold text-gray-900",children:[" ",f]}),"?"]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-5 bg-gray-50 rounded-b-xl",children:[e.jsx("button",{onClick:m,disabled:i,className:"px-6 py-2.5 text-sm font-semibold font-manrope text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:y}),e.jsxs("button",{onClick:u,disabled:i,className:`px-6 py-2.5 text-sm font-semibold font-manrope text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2 ${j?"bg-red-600 hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow-md":"bg-teal-600 hover:bg-teal-700 focus:ring-teal-500 shadow-sm hover:shadow-md"}`,children:[i&&e.jsx(le,{className:"w-4 h-4 animate-spin"}),n]})]})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes modalSlideIn {
          from {
            opacity: 0;
            transform: scale(0.95) translateY(-10px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
      `})]}),document.body):null}function ie({message:r,type:m,isVisible:u,onClose:w,duration:b=4e3}){const[n,y]=a.useState(u);if(a.useEffect(()=>{if(u){y(!0);const f=setTimeout(()=>{w()},b);return()=>clearTimeout(f)}else{const f=setTimeout(()=>{y(!1)},300);return()=>clearTimeout(f)}},[u,w,b]),!n)return null;const i=m==="success",j=i?U:V;return q.createPortal(e.jsxs("div",{className:`fixed top-6 right-6 z-[10001] transform transition-all duration-300 ${u?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:[e.jsxs("div",{className:`flex items-center gap-4 px-5 py-4 rounded-xl shadow-xl max-w-sm border ${i?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,style:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.05)",animation:u?"toastSlideIn 0.3s ease-out":"toastSlideOut 0.2s ease-in"},children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full flex-shrink-0 ${i?"bg-green-100":"bg-red-100"}`,children:e.jsx(j,{className:`w-5 h-5 ${i?"text-green-600":"text-red-600"}`})}),e.jsx("p",{className:"text-sm font-semibold font-manrope flex-1 leading-relaxed",children:r}),e.jsx("button",{onClick:w,className:`flex-shrink-0 p-1.5 rounded-lg hover:bg-black/10 transition-all duration-200 ${i?"text-green-600 hover:text-green-700 hover:bg-green-100":"text-red-600 hover:text-red-700 hover:bg-red-100"}`,children:e.jsx(F,{className:"w-4 h-4"})})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes toastSlideIn {
          from {
            opacity: 0;
            transform: translateX(100%) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateX(0) scale(1);
          }
        }
        
        @keyframes toastSlideOut {
          from {
            opacity: 1;
            transform: translateX(0) scale(1);
          }
          to {
            opacity: 0;
            transform: translateX(100%) scale(0.95);
          }
        }
      `})]}),document.body)}function Ne(){const r=H(),{isAuthenticated:m,isLoading:u}=Z(),[w,b]=a.useState([]),[n,y]=a.useState(!0),[i,j]=a.useState(""),[f,k]=a.useState("name"),[h,g]=a.useState("all"),[c,S]=a.useState({isOpen:!1}),[E,B]=a.useState([]),[I,R]=a.useState(null),[v,_]=a.useState({isOpen:!1}),[W,M]=a.useState(!1),[C,z]=a.useState({isVisible:!1,message:"",type:"success"});a.useEffect(()=>{m&&!u&&$()},[m,u]);async function $(){y(!0);try{const s=await D.get("/workers");if(s.data.status==="success"){const l=s.data.data.workers||[];b(l)}else b([])}catch(s){console.error("Failed to load workers:",s),b([])}finally{y(!1)}}const N=s=>{_({isOpen:!0,worker:s})},T=async()=>{if(v.worker){M(!0);try{(await D.delete(`/workers/${v.worker.id}`)).data.status==="success"&&(z({isVisible:!0,message:`${v.worker.first_name} ${v.worker.last_name} has been deleted successfully`,type:"success"}),$(),_({isOpen:!1}))}catch(s){console.error("Failed to delete worker:",s),z({isVisible:!0,message:"Failed to delete worker. Please try again.",type:"error"})}finally{M(!1)}}},t=()=>{_({isOpen:!1})},o=s=>{S({isOpen:!0,worker:s}),B([]),R(null)},x=()=>{S({isOpen:!1})},p=()=>{x(),$()},d=w.filter(s=>{var l;if(h==="active"&&!s.active||h==="inactive"&&s.active)return!1;if(i){const A=i.toLowerCase();return s.first_name.toLowerCase().includes(A)||s.last_name.toLowerCase().includes(A)||s.email.toLowerCase().includes(A)||((l=s.phone)==null?void 0:l.includes(A))}return!0}).sort((s,l)=>{switch(f){case"name":return`${s.first_name} ${s.last_name}`.localeCompare(`${l.first_name} ${l.last_name}`);case"email":return s.email.localeCompare(l.email);case"status":return(l.active?1:0)-(s.active?1:0);default:return 0}});return u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(O,{})}):m?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your workforce"})]}),e.jsxs("button",{onClick:()=>r("/workers/create"),className:"flex items-center gap-2 px-4 py-2 bg-teal-600 text-white font-medium rounded-lg hover:bg-teal-700 transition-colors shadow-sm",children:[e.jsx(X,{size:20}),"Add New Worker"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 max-w-md relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search",value:i,onChange:s=>j(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("select",{value:f,onChange:s=>k(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 bg-white",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"email",children:"Sort by Email"}),e.jsx("option",{value:"status",children:"Sort by Status"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g("all"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${h==="all"?"bg-teal-100 text-teal-700":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-300"}`,children:"All"}),e.jsx("button",{onClick:()=>g("active"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${h==="active"?"bg-green-100 text-green-700":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-300"}`,children:"Active"}),e.jsx("button",{onClick:()=>g("inactive"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${h==="inactive"?"bg-gray-200 text-gray-700":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-300"}`,children:"Inactive"})]})]}),n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(O,{})}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ee,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:i?"No workers found":"No workers yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:i?"Try adjusting your search or filters":"Add your first worker to get started"}),!i&&e.jsxs("button",{onClick:()=>r("/workers/create"),className:"inline-flex items-center gap-2 px-4 py-2 bg-teal-600 text-white font-medium rounded-lg hover:bg-teal-700 transition-colors",children:[e.jsx(X,{size:20}),"Add Worker"]})]}):e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-700",children:"Worker Name"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-gray-700",children:"Status"}),e.jsx("th",{className:"text-right py-3 px-6 text-sm font-medium text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/workers/${s.id}`),children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 font-medium",children:[s.first_name[0],s.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[s.first_name," ",s.last_name]}),s.skills_json&&s.skills_json.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[s.skills_json.slice(0,3).map((l,A)=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:l},A)),s.skills_json.length>3&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:["+",s.skills_json.length-3]})]})]})]})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:s.phone||"â€”"}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-600",children:s.email}),e.jsx("td",{className:"py-4 px-6",children:s.active?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:[e.jsx(U,{size:14}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-gray-100 text-gray-600 text-xs font-medium rounded-full",children:[e.jsx(V,{size:14}),"Inactive"]})}),e.jsx("td",{className:"py-4 px-6 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.active&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),o(s)},className:"px-3 py-1.5 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors",title:"Schedule Worker",children:[e.jsx(K,{size:14,className:"inline mr-1"}),"Schedule"]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),r(`/workers/${s.id}/edit`)},className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition",title:"Edit",children:e.jsx(se,{size:16})}),e.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),N(s)},className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition",title:"Delete",children:e.jsx(G,{size:16})})]})})]},s.id))})]})})]}),c.isOpen&&c.worker&&e.jsx(oe,{worker:c.worker,onClose:x,onSuccess:p}),e.jsx(ne,{isOpen:v.isOpen,onClose:t,onConfirm:T,title:"Delete Worker",message:"Are you sure you want to delete this worker?",confirmText:"Delete Worker",cancelText:"Cancel",isLoading:W,isDestructive:!0,workerName:v.worker?`${v.worker.first_name} ${v.worker.last_name}`:void 0}),e.jsx(ie,{isVisible:C.isVisible,message:C.message,type:C.type,onClose:()=>z({...C,isVisible:!1})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600",children:"Please log in to view workers."})]})})}function oe({worker:r,onClose:m,onSuccess:u}){var T;const[w,b]=a.useState([]),[n,y]=a.useState(new Set),[i,j]=a.useState(!0),[f,k]=a.useState(!1),[h,g]=a.useState(null),[c,S]=a.useState(""),[E,B]=a.useState("all"),[I,R]=a.useState([]);a.useEffect(()=>{v()},[r.id]);async function v(){j(!0);try{const t=await D.get("/events",{params:{tab:"active",filter:"needs_workers"}});if(t.data.status==="success"){const o=t.data.data,x=[];o.forEach(p=>{p.shifts_by_role&&p.shifts_by_role.forEach(d=>{d.shifts.forEach(s=>{var l;r.skills_json.includes(d.role_name)&&s.staffing_progress.percentage<100&&x.push({id:s.id,event:{id:p.id,title:p.title},role_needed:d.role_name,start_time_utc:s.start_time_utc,end_time_utc:s.end_time_utc,location:((l=p.venue)==null?void 0:l.formatted_address)||"Location TBD",current_status:s.status})})})}),b(x)}}catch(t){console.error("Failed to load available shifts:",t),g("Failed to load available shifts")}finally{j(!1)}}const _=t=>{const o=new Set(n);o.has(t)?o.delete(t):o.add(t),y(o)},W=()=>{n.size===N.length?y(new Set):y(new Set(N.map(t=>t.id)))};async function M(){var t,o,x,p;if(n.size===0){g("Please select at least one shift");return}k(!0),g(null);try{const d=await D.post("/staffing/bulk_create",{worker_id:r.id,shift_ids:Array.from(n)});d.data.status==="success"?(alert(d.data.message),u()):g(d.data.message||"Failed to schedule worker for shifts")}catch(d){console.error("Failed to bulk assign:",d),(o=(t=d.response)==null?void 0:t.data)!=null&&o.conflicts?(R(d.response.data.conflicts),g("Scheduling conflicts detected. Please review below.")):g(((p=(x=d.response)==null?void 0:x.data)==null?void 0:p.message)||"Failed to schedule worker for shifts")}finally{k(!1)}}const C=t=>P(L(t),"EEE, MMM d, yyyy"),z=t=>P(L(t),"h:mm a"),$=r.skills_json||[],N=w.filter(t=>{if(E!=="all"&&t.role_needed!==E)return!1;if(c){const o=c.toLowerCase();return t.event.title.toLowerCase().includes(o)||t.location.toLowerCase().includes(o)}return!0});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Schedule ",r.first_name," ",r.last_name," for Shifts"]}),e.jsx("button",{onClick:m,className:"p-1 text-gray-400 hover:text-gray-600 rounded transition",children:e.jsx(F,{size:24})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:(T=r.skills_json)==null?void 0:T.map(t=>e.jsx("span",{className:"px-2.5 py-1 bg-teal-100 text-teal-700 text-xs font-medium rounded",children:t},t))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(O,{})}):e.jsxs(e.Fragment,{children:[h&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[e.jsx(F,{size:18,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:h})]}),I.length>0&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Scheduling Conflicts"}),e.jsx("div",{className:"space-y-2",children:I.map((t,o)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"text-yellow-800",children:[e.jsx("strong",{children:t.new_shift.event})," conflicts with:"]}),e.jsx("ul",{className:"ml-4 mt-1 space-y-1",children:t.conflicting_with.map((x,p)=>e.jsxs("li",{className:"text-yellow-700",children:[x.event," (",P(L(x.start_time),"MMM d, h:mm a")," - ",P(L(x.end_time),"h:mm a"),")"]},p))})]},o))})]}),e.jsxs("div",{className:"mb-4 flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search events or locations...",value:c,onChange:t=>S(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("select",{value:E,onChange:t=>B(t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 bg-white",children:[e.jsx("option",{value:"all",children:"All Roles"}),$.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),N.length>0&&e.jsxs("div",{className:"mb-4 flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.size===N.length&&N.length>0,onChange:W,className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Select All (",N.length," shifts)"]})]}),n.size>0&&e.jsxs("span",{className:"text-sm font-medium text-teal-600",children:[n.size," selected"]})]}),N.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(J,{size:48,className:"mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"font-medium",children:"No available shifts found"}),e.jsx("p",{className:"text-sm mt-1",children:c||E!=="all"?"Try adjusting your filters":`No shifts matching ${r.first_name}'s skills need workers`})]}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:N.map(t=>{const o=n.has(t.id);return e.jsx("button",{onClick:()=>_(t.id),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${o?"border-teal-600 bg-teal-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:()=>_(t.id),className:"mt-1 w-4 h-4 text-teal-600 rounded focus:ring-teal-500",onClick:x=>x.stopPropagation()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.event.title}),e.jsx("span",{className:"inline-block px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-medium rounded mt-1",children:t.role_needed})]})}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{size:14,className:"text-gray-400"}),e.jsx("span",{children:C(t.start_time_utc)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{size:14,className:"text-gray-400"}),e.jsxs("span",{children:[z(t.start_time_utc)," - ",z(t.end_time_utc)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"truncate",children:t.location})]})]})]})]})},t.id)})})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:n.size>0?e.jsxs("span",{className:"font-medium",children:[n.size," shift",n.size!==1?"s":""," selected"]}):e.jsxs("span",{children:["Select shifts to assign ",r.first_name," to"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:m,disabled:f,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:M,disabled:n.size===0||f,className:"px-6 py-2 bg-teal-600 text-white font-medium rounded-lg hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Scheduling..."]}):e.jsxs(e.Fragment,{children:["Schedule for ",n.size," Shift",n.size!==1?"s":""]})})]})]})]})})}export{Ne as WorkersPage};
