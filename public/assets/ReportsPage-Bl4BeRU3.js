import{c as Qe,a as de,j as i,A as ze}from"./index-CmwrWGyu.js";import{r as A,R as se}from"./vendor-79DyBOV9.js";import{T as Be}from"./Toast-CF7Ob4dp.js";import{s as fe}from"./number-BA3fu1JD.js";import{_ as le,g as Ge,s as we,b as Ie,r as ue,t as oe,c as Xe,a as J,d as Ve,e as Re,l as Ze,h as Pe,i as Ke,j as De,k as Je,m as Se,n as er,f as O,C as rr}from"./index-G_HN3LUL.js";import{e as Me,s as _e}from"./index-CncchC3d.js";import{s as he}from"./index-D1vR08kF.js";import{F as Oe}from"./file-text-CdRZajbK.js";import{D as Ee}from"./dollar-sign-BQ4HjPcc.js";import{U as tr}from"./users-DcTt9rL4.js";import{C as ge}from"./calendar-B3GBLfN5.js";import{D as Ye}from"./download-p7DVPi4w.js";import{m as ar,a as nr,b as sr}from"./index-BfcYz2DB.js";import"./x-circle-CcZdKpnf.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Qe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function ir(s,o){if(s==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(s[n]=o[n]);return s}function Ue(s,o){(o==null||o>s.length)&&(o=s.length);for(var n=0,a=Array(o);n<o;n++)a[n]=s[n];return a}function lr(s,o){if(s){if(typeof s=="string")return Ue(s,o);var n={}.toString.call(s).slice(8,-1);return n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set"?Array.from(s):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(s,o):void 0}}function Ae(s,o){var n=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!n){if(Array.isArray(s)||(n=lr(s))||o){n&&(s=n);var a=0,e=function(){};return{s:e,n:function(){return a>=s.length?{done:!0}:{done:!1,value:s[a++]}},e:function(h){throw h},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t,r=!0,l=!1;return{s:function(){n=n.call(s)},n:function(){var h=n.next();return r=h.done,h},e:function(h){l=!0,t=h},f:function(){try{r||n.return==null||n.return()}finally{if(l)throw t}}}}function c(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function be(s,o){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},be(s,o)}function y(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&be(s,o)}function pe(s){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},pe(s)}function Le(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Le=function(){return!!s})()}function ur(s,o){if(o&&(le(o)=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(s)}function x(s){var o=Le();return function(){var n,a=pe(s);if(o){var e=pe(this).constructor;n=Reflect.construct(a,arguments,e)}else n=a.apply(this,arguments);return ur(this,n)}}function v(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function cr(s,o){if(le(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var a=n.call(s,o);if(le(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}function He(s){var o=cr(s,"string");return le(o)=="symbol"?o:o+""}function dr(s,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,He(a.key),a)}}function p(s,o,n){return o&&dr(s.prototype,o),Object.defineProperty(s,"prototype",{writable:!1}),s}function u(s,o,n){return(o=He(o))in s?Object.defineProperty(s,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[o]=n,s}var fr=10,$e=function(){function s(){v(this,s),u(this,"priority",void 0),u(this,"subPriority",0)}return p(s,[{key:"validate",value:function(n,a){return!0}}]),s}(),hr=function(s){y(n,s);var o=x(n);function n(a,e,t,r,l){var d;return v(this,n),d=o.call(this),d.value=a,d.validateValue=e,d.setValue=t,d.priority=r,l&&(d.subPriority=l),d}return p(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,r){return this.setValue(e,t,this.value,r)}}]),n}($e),vr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",fr),u(c(a),"subPriority",-1),a}return p(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var r=new Date(0);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}}]),n}($e),w=function(){function s(){v(this,s),u(this,"incompatibleTokens",void 0),u(this,"priority",void 0),u(this,"subPriority",void 0)}return p(s,[{key:"run",value:function(n,a,e,t){var r=this.parse(n,a,e,t);return r?{setter:new hr(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}},{key:"validate",value:function(n,a,e){return!0}}]),s}(),pr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",140),u(c(a),"incompatibleTokens",["R","u","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,r){return t.era=r,e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(w),D={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},W={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function M(s,o){return s&&{value:o(s.value),rest:s.rest}}function N(s,o){var n=o.match(s);return n?{value:parseInt(n[0],10),rest:o.slice(n[0].length)}:null}function F(s,o){var n=o.match(s);if(!n)return null;if(n[0]==="Z")return{value:0,rest:o.slice(1)};var a=n[1]==="+"?1:-1,e=n[2]?parseInt(n[2],10):0,t=n[3]?parseInt(n[3],10):0,r=n[5]?parseInt(n[5],10):0;return{value:a*(e*ar+t*nr+r*sr),rest:o.slice(n[0].length)}}function qe(s){return N(D.anyDigitsSigned,s)}function C(s,o){switch(s){case 1:return N(D.singleDigit,o);case 2:return N(D.twoDigits,o);case 3:return N(D.threeDigits,o);case 4:return N(D.fourDigits,o);default:return N(new RegExp("^\\d{1,"+s+"}"),o)}}function me(s,o){switch(s){case 1:return N(D.singleDigitSigned,o);case 2:return N(D.twoDigitsSigned,o);case 3:return N(D.threeDigitsSigned,o);case 4:return N(D.fourDigitsSigned,o);default:return N(new RegExp("^-?\\d{1,"+s+"}"),o)}}function Te(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function We(s,o){var n=o>0,a=n?o:1-o,e;if(a<=50)e=s||100;else{var t=a+50,r=Math.floor(t/100)*100,l=s>=t%100;e=s+r-(l?100:0)}return n?e:1-e}function Fe(s){return s%400===0||s%4===0&&s%100!==0}var mr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",130),u(c(a),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){var l=function(h){return{year:h,isTwoDigitYear:t==="yy"}};switch(t){case"y":return M(C(4,e),l);case"yo":return M(r.ordinalNumber(e,{unit:"year"}),l);default:return M(C(t.length,e),l)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r){var l=e.getUTCFullYear();if(r.isTwoDigitYear){var d=We(r.year,l);return e.setUTCFullYear(d,0,1),e.setUTCHours(0,0,0,0),e}var h=!("era"in t)||t.era===1?r.year:1-r.year;return e.setUTCFullYear(h,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(w),yr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",130),u(c(a),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){var l=function(h){return{year:h,isTwoDigitYear:t==="YY"}};switch(t){case"Y":return M(C(4,e),l);case"Yo":return M(r.ordinalNumber(e,{unit:"year"}),l);default:return M(C(t.length,e),l)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r,l){var d=Ge(e,l);if(r.isTwoDigitYear){var h=We(r.year,d);return e.setUTCFullYear(h,0,l.firstWeekContainsDate),e.setUTCHours(0,0,0,0),we(e,l)}var g=!("era"in t)||t.era===1?r.year:1-r.year;return e.setUTCFullYear(g,0,l.firstWeekContainsDate),e.setUTCHours(0,0,0,0),we(e,l)}}]),n}(w),xr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",130),u(c(a),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t){return me(t==="R"?4:t.length,e)}},{key:"set",value:function(e,t,r){var l=new Date(0);return l.setUTCFullYear(r,0,4),l.setUTCHours(0,0,0,0),Ie(l)}}]),n}(w),wr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",130),u(c(a),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t){return me(t==="u"?4:t.length,e)}},{key:"set",value:function(e,t,r){return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(w),gr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",120),u(c(a),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"Q":case"QQ":return C(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth((r-1)*3,1),e.setUTCHours(0,0,0,0),e}}]),n}(w),br=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",120),u(c(a),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"q":case"qq":return C(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth((r-1)*3,1),e.setUTCHours(0,0,0,0),e}}]),n}(w),Tr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),u(c(a),"priority",110),a}return p(n,[{key:"parse",value:function(e,t,r){var l=function(h){return h-1};switch(t){case"M":return M(N(D.month,e),l);case"MM":return M(C(2,e),l);case"Mo":return M(r.ordinalNumber(e,{unit:"month"}),l);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),n}(w),kr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",110),u(c(a),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){var l=function(h){return h-1};switch(t){case"L":return M(N(D.month,e),l);case"LL":return M(C(2,e),l);case"Lo":return M(r.ordinalNumber(e,{unit:"month"}),l);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),n}(w);function jr(s,o,n){ue(2,arguments);var a=oe(s),e=J(o),t=Xe(a,n)-e;return a.setUTCDate(a.getUTCDate()-t*7),a}var Nr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",100),u(c(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"w":return N(D.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r,l){return we(jr(e,r,l),l)}}]),n}(w);function Cr(s,o){ue(2,arguments);var n=oe(s),a=J(o),e=Ve(n)-a;return n.setUTCDate(n.getUTCDate()-e*7),n}var Pr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",100),u(c(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"I":return N(D.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r){return Ie(Cr(e,r))}}]),n}(w),Dr=[31,28,31,30,31,30,31,31,30,31,30,31],Mr=[31,29,31,30,31,30,31,31,30,31,30,31],_r=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",90),u(c(a),"subPriority",1),u(c(a),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"d":return N(D.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){var r=e.getUTCFullYear(),l=Fe(r),d=e.getUTCMonth();return l?t>=1&&t<=Mr[d]:t>=1&&t<=Dr[d]}},{key:"set",value:function(e,t,r){return e.setUTCDate(r),e.setUTCHours(0,0,0,0),e}}]),n}(w),Or=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",90),u(c(a),"subpriority",1),u(c(a),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"D":case"DD":return N(D.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){var r=e.getUTCFullYear(),l=Fe(r);return l?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,r){return e.setUTCMonth(0,r),e.setUTCHours(0,0,0,0),e}}]),n}(w);function ke(s,o,n){var a,e,t,r,l,d,h,g;ue(2,arguments);var E=Re(),U=J((a=(e=(t=(r=n==null?void 0:n.weekStartsOn)!==null&&r!==void 0?r:n==null||(l=n.locale)===null||l===void 0||(d=l.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&t!==void 0?t:E.weekStartsOn)!==null&&e!==void 0?e:(h=E.locale)===null||h===void 0||(g=h.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&a!==void 0?a:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var L=oe(s),H=J(o),G=L.getUTCDay(),X=H%7,V=(X+7)%7,I=(V<U?7:0)+H-G;return L.setUTCDate(L.getUTCDate()+I),L}var Er=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",90),u(c(a),"incompatibleTokens",["D","i","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,l){return e=ke(e,r,l),e.setUTCHours(0,0,0,0),e}}]),n}(w),Ur=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",90),u(c(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r,l){var d=function(g){var E=Math.floor((g-1)/7)*7;return(g+l.weekStartsOn+6)%7+E};switch(t){case"e":case"ee":return M(C(t.length,e),d);case"eo":return M(r.ordinalNumber(e,{unit:"day"}),d);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,l){return e=ke(e,r,l),e.setUTCHours(0,0,0,0),e}}]),n}(w),Ar=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",90),u(c(a),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r,l){var d=function(g){var E=Math.floor((g-1)/7)*7;return(g+l.weekStartsOn+6)%7+E};switch(t){case"c":case"cc":return M(C(t.length,e),d);case"co":return M(r.ordinalNumber(e,{unit:"day"}),d);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,l){return e=ke(e,r,l),e.setUTCHours(0,0,0,0),e}}]),n}(w);function Ir(s,o){ue(2,arguments);var n=J(o);n%7===0&&(n=n-7);var a=1,e=oe(s),t=e.getUTCDay(),r=n%7,l=(r+7)%7,d=(l<a?7:0)+n-t;return e.setUTCDate(e.getUTCDate()+d),e}var Rr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",90),u(c(a),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){var l=function(h){return h===0?7:h};switch(t){case"i":case"ii":return C(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return M(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),l);case"iiiii":return M(r.day(e,{width:"narrow",context:"formatting"}),l);case"iiiiii":return M(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),l);case"iiii":default:return M(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,r){return e=Ir(e,r),e.setUTCHours(0,0,0,0),e}}]),n}(w),Yr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",80),u(c(a),"incompatibleTokens",["b","B","H","k","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Te(r),0,0,0),e}}]),n}(w),Lr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",80),u(c(a),"incompatibleTokens",["a","B","H","k","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Te(r),0,0,0),e}}]),n}(w),Hr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",80),u(c(a),"incompatibleTokens",["a","b","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Te(r),0,0,0),e}}]),n}(w),$r=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",70),u(c(a),"incompatibleTokens",["H","K","k","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"h":return N(D.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,r){var l=e.getUTCHours()>=12;return l&&r<12?e.setUTCHours(r+12,0,0,0):!l&&r===12?e.setUTCHours(0,0,0,0):e.setUTCHours(r,0,0,0),e}}]),n}(w),qr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",70),u(c(a),"incompatibleTokens",["a","b","h","K","k","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"H":return N(D.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,r){return e.setUTCHours(r,0,0,0),e}}]),n}(w),Wr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",70),u(c(a),"incompatibleTokens",["h","H","k","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"K":return N(D.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){var l=e.getUTCHours()>=12;return l&&r<12?e.setUTCHours(r+12,0,0,0):e.setUTCHours(r,0,0,0),e}}]),n}(w),Fr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",70),u(c(a),"incompatibleTokens",["a","b","h","H","K","t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"k":return N(D.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,r){var l=r<=24?r%24:r;return e.setUTCHours(l,0,0,0),e}}]),n}(w),Qr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",60),u(c(a),"incompatibleTokens",["t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"m":return N(D.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCMinutes(r,0,0),e}}]),n}(w),zr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",50),u(c(a),"incompatibleTokens",["t","T"]),a}return p(n,[{key:"parse",value:function(e,t,r){switch(t){case"s":return N(D.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return C(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCSeconds(r,0),e}}]),n}(w),Br=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",30),u(c(a),"incompatibleTokens",["t","T"]),a}return p(n,[{key:"parse",value:function(e,t){var r=function(d){return Math.floor(d*Math.pow(10,-t.length+3))};return M(C(t.length,e),r)}},{key:"set",value:function(e,t,r){return e.setUTCMilliseconds(r),e}}]),n}(w),Gr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",10),u(c(a),"incompatibleTokens",["t","T","x"]),a}return p(n,[{key:"parse",value:function(e,t){switch(t){case"X":return F(W.basicOptionalMinutes,e);case"XX":return F(W.basic,e);case"XXXX":return F(W.basicOptionalSeconds,e);case"XXXXX":return F(W.extendedOptionalSeconds,e);case"XXX":default:return F(W.extended,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),n}(w),Xr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",10),u(c(a),"incompatibleTokens",["t","T","X"]),a}return p(n,[{key:"parse",value:function(e,t){switch(t){case"x":return F(W.basicOptionalMinutes,e);case"xx":return F(W.basic,e);case"xxxx":return F(W.basicOptionalSeconds,e);case"xxxxx":return F(W.extendedOptionalSeconds,e);case"xxx":default:return F(W.extended,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),n}(w),Vr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",40),u(c(a),"incompatibleTokens","*"),a}return p(n,[{key:"parse",value:function(e){return qe(e)}},{key:"set",value:function(e,t,r){return[new Date(r*1e3),{timestampIsSet:!0}]}}]),n}(w),Zr=function(s){y(n,s);var o=x(n);function n(){var a;v(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a=o.call.apply(o,[this].concat(t)),u(c(a),"priority",20),u(c(a),"incompatibleTokens","*"),a}return p(n,[{key:"parse",value:function(e){return qe(e)}},{key:"set",value:function(e,t,r){return[new Date(r),{timestampIsSet:!0}]}}]),n}(w),Kr={G:new pr,y:new mr,Y:new yr,R:new xr,u:new wr,Q:new gr,q:new br,M:new Tr,L:new kr,w:new Nr,I:new Pr,d:new _r,D:new Or,E:new Er,e:new Ur,c:new Ar,i:new Rr,a:new Yr,b:new Lr,B:new Hr,h:new $r,H:new qr,K:new Wr,k:new Fr,m:new Qr,s:new zr,S:new Br,X:new Gr,x:new Xr,t:new Vr,T:new Zr},Jr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Sr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,et=/^'([^]*?)'?$/,rt=/''/g,tt=/\S/,at=/[a-zA-Z]/;function nt(s,o,n,a){var e,t,r,l,d,h,g,E,U,L,H,G,X,V;ue(3,arguments);var I=String(s),S=String(o),Z=Re(),ee=(e=(t=void 0)!==null&&t!==void 0?t:Z.locale)!==null&&e!==void 0?e:Ze;if(!ee.match)throw new RangeError("locale must contain match property");var re=J((r=(l=(d=(h=void 0)!==null&&h!==void 0?h:void 0)!==null&&d!==void 0?d:Z.firstWeekContainsDate)!==null&&l!==void 0?l:(g=Z.locale)===null||g===void 0||(E=g.options)===null||E===void 0?void 0:E.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(re>=1&&re<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ie=J((U=(L=(H=(G=void 0)!==null&&G!==void 0?G:void 0)!==null&&H!==void 0?H:Z.weekStartsOn)!==null&&L!==void 0?L:(X=Z.locale)===null||X===void 0||(V=X.options)===null||V===void 0?void 0:V.weekStartsOn)!==null&&U!==void 0?U:0);if(!(ie>=0&&ie<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(S==="")return I===""?oe(n):new Date(NaN);var te={firstWeekContainsDate:re,weekStartsOn:ie,locale:ee},z=[new vr],ae=S.match(Sr).map(function(k){var T=k[0];if(T in Pe){var Y=Pe[T];return Y(k,ee.formatLong)}return k}).join("").match(Jr),$=[],Q=Ae(ae),B;try{var f=function(){var T=B.value;!(a!=null&&a.useAdditionalWeekYearTokens)&&Ke(T)&&De(T,S,s),!(a!=null&&a.useAdditionalDayOfYearTokens)&&Je(T)&&De(T,S,s);var Y=T[0],ce=Kr[Y];if(ce){var je=ce.incompatibleTokens;if(Array.isArray(je)){var Ne=$.find(function(Ce){return je.includes(Ce.token)||Ce.token===Y});if(Ne)throw new RangeError("The format string mustn't contain `".concat(Ne.fullToken,"` and `").concat(T,"` at the same time"))}else if(ce.incompatibleTokens==="*"&&$.length>0)throw new RangeError("The format string mustn't contain `".concat(T,"` and any other token at the same time"));$.push({token:Y,fullToken:T});var xe=ce.run(I,T,ee.match,te);if(!xe)return{v:new Date(NaN)};z.push(xe.setter),I=xe.rest}else{if(Y.match(at))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Y+"`");if(T==="''"?T="'":Y==="'"&&(T=st(T)),I.indexOf(T)===0)I=I.slice(T.length);else return{v:new Date(NaN)}}};for(Q.s();!(B=Q.n()).done;){var j=f();if(le(j)==="object")return j.v}}catch(k){Q.e(k)}finally{Q.f()}if(I.length>0&&tt.test(I))return new Date(NaN);var _=z.map(function(k){return k.priority}).sort(function(k,T){return T-k}).filter(function(k,T,Y){return Y.indexOf(k)===T}).map(function(k){return z.filter(function(T){return T.priority===k}).sort(function(T,Y){return Y.subPriority-T.subPriority})}).map(function(k){return k[0]}),m=oe(n);if(isNaN(m.getTime()))return new Date(NaN);var b=Se(m,er(m)),q={},P=Ae(_),R;try{for(P.s();!(R=P.n()).done;){var ne=R.value;if(!ne.validate(b,te))return new Date(NaN);var K=ne.set(b,q,te);Array.isArray(K)?(b=K[0],ir(q,K[1])):b=K}}catch(k){P.e(k)}finally{P.f()}return b}function st(s){return s.match(et)[1].replace(rt,"'")}function ye(s){try{const o=nt(s,"yyyy-MM-dd",new Date);return O(o,"MMM d, yyyy")}catch{return s}}function gt(){const[s,o]=A.useState(null),[n,a]=A.useState("today"),[e,t]=A.useState({start:O(new Date,"yyyy-MM-dd"),end:O(new Date,"yyyy-MM-dd")}),[r,l]=A.useState(null),[d,h]=A.useState(null),[g,E]=A.useState(null),[U,L]=A.useState(!1),H=se.useRef(!1),[G,X]=A.useState([]),[V,I]=A.useState([]),[S,Z]=A.useState([]),[ee,re]=A.useState(null),[ie,te]=A.useState(!1),[z,ae]=A.useState({isVisible:!1,message:"",type:"success"});se.useEffect(()=>{(async()=>{var f,j,_;try{const m=await de.get("/workers?active=true"),q=(((j=(f=m.data)==null?void 0:f.data)==null?void 0:j.workers)||((_=m.data)==null?void 0:_.data)||[]).map(R=>({id:R.id,name:`${R.first_name} ${R.last_name}`,skills_json:R.skills_json||[]}));X(q);const P=new Set;q.forEach(R=>(R.skills_json||[]).forEach(ne=>P.add(ne))),Z(Array.from(P).sort())}catch(m){console.error("Failed to load workers for filters",m)}})(),(async()=>{var f;try{const _=((f=(await de.get("/events?tab=active")).data)==null?void 0:f.data)||[];I(_.map(m=>({id:m.id,title:m.title})))}catch(j){console.error("Failed to load events for filters",j)}})()},[]);const $=se.useCallback(()=>{const f=new Date;switch(n){case"today":return{start:O(f,"yyyy-MM-dd"),end:O(f,"yyyy-MM-dd")};case"yesterday":const j=he(f,1);return{start:O(j,"yyyy-MM-dd"),end:O(j,"yyyy-MM-dd")};case"last_7_days":return{start:O(he(f,7),"yyyy-MM-dd"),end:O(f,"yyyy-MM-dd")};case"last_30_days":return{start:O(he(f,30),"yyyy-MM-dd"),end:O(f,"yyyy-MM-dd")};case"this_month":return{start:O(_e(f),"yyyy-MM-dd"),end:O(Me(f),"yyyy-MM-dd")};case"last_month":const _=new Date(f.getFullYear(),f.getMonth()-1,1);return{start:O(_e(_),"yyyy-MM-dd"),end:O(Me(_),"yyyy-MM-dd")};case"custom":return e;default:return e}},[n,e]),Q=se.useCallback(async()=>{var f;te(!0);try{const j=$();let _=`/reports/timesheet/preview?start_date=${j.start}&end_date=${j.end}`;d&&(_+=`&event_id=${d}`),r&&(_+=`&worker_id=${r}`),g&&(_+=`&skill_name=${encodeURIComponent(g)}`);const m=await de.get(_),b=((f=m.data)==null?void 0:f.data)||m.data;re(b)}catch(j){console.error("Failed to fetch timesheet preview:",j),re(null)}finally{te(!1)}},[$,d,r,g]);se.useEffect(()=>{Q()},[Q]),se.useEffect(()=>{const f=()=>{Q()};return window.addEventListener("approval-updated",f),()=>{window.removeEventListener("approval-updated",f)}},[Q]);async function B(f){var j,_;if(!H.current){H.current=!0,L(!0);try{const m=$();let b="";switch(f){case"timesheet":b=`/reports/timesheet?start_date=${m.start}&end_date=${m.end}`,d&&(b+=`&event_id=${d}`),r&&(b+=`&worker_id=${r}`),g&&(b+=`&skill_name=${encodeURIComponent(g)}`);break;case"payroll":b=`/reports/payroll?start_date=${m.start}&end_date=${m.end}`,d&&(b+=`&event_id=${d}`),r&&(b+=`&worker_id=${r}`);break;case"worker_hours":b=`/reports/worker_hours?start_date=${m.start}&end_date=${m.end}`,r&&(b+=`&worker_id=${r}`),g&&(b+=`&skill_name=${encodeURIComponent(g)}`);break;case"event_summary":b=`/reports/event_summary?start_date=${m.start}&end_date=${m.end}`,d&&(b+=`&event_id=${d}`);break}const q=await de.get(b,{responseType:"blob"}),P=q.headers["content-disposition"],ne=((j=P==null?void 0:P.match(/filename="?([^";]+)"?/i))==null?void 0:j[1])||`report_${m.start}_to_${m.end}.csv`,K=window.URL.createObjectURL(new Blob([q.data])),k=document.createElement("a");k.href=K,k.setAttribute("download",ne),document.body.appendChild(k),k.click(),k.remove(),window.URL.revokeObjectURL(K)}catch(m){console.error("Failed to export:",m);const b=(_=m==null?void 0:m.response)==null?void 0:_.data;try{if(b&&typeof b.text=="function"){const q=await b.text(),P=JSON.parse(q),R=(P==null?void 0:P.message)||(P==null?void 0:P.errors)&&(Array.isArray(P.errors)?P.errors.join(", "):String(P.errors));ae({isVisible:!0,message:R||"Failed to export report",type:"error"})}else ae({isVisible:!0,message:(m==null?void 0:m.message)||"Failed to export report",type:"error"})}catch{ae({isVisible:!0,message:"Failed to export report",type:"error"})}}finally{L(!1),H.current=!1}}}return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("div",{className:"max-w-7xl mx-auto p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Reports"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Export timesheets and payroll data for processing"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[i.jsx(ve,{icon:i.jsx(Oe,{size:24}),title:"Weekly Timesheet",description:"Detailed time records with clock-in/clock-out times. Use as backup documentation if needed.",color:"teal",lastExport:"Last 7 days",onExport:()=>{a("last_7_days"),B("timesheet")},exporting:U,preview:ee,loadingPreview:ie,dateRange:$()}),i.jsx(ve,{icon:i.jsx(Ee,{size:24}),title:"Payroll Summary",description:"See total hours and compensation per worker. Perfect for processing weekly or monthly payroll.",color:"indigo",lastExport:"Last 7 days",onExport:()=>{a("last_7_days"),B("payroll")},exporting:U}),i.jsx(ve,{icon:i.jsx(tr,{size:24}),title:"Worker Hours Report",description:"Individual worker breakdown showing all shifts worked. Good for performance reviews and audits.",color:"blue",lastExport:"This month",onExport:()=>{a("this_month"),B("worker_hours")},exporting:U}),i.jsx(ve,{icon:i.jsx(ge,{size:24}),title:"Event Summary",description:"Track labor costs per event. See which events are most expensive and monitor monthly spending.",color:"purple",lastExport:"Last 30 days",onExport:()=>{a("last_30_days"),B("event_summary")},exporting:U})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Advanced Export Options"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Report Type"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsx("button",{onClick:()=>o("timesheet"),className:`p-4 rounded-lg border-2 transition-all text-left ${s==="timesheet"?"border-teal-600 bg-teal-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s==="timesheet"?"bg-teal-100 text-teal-600":"bg-gray-100 text-gray-600"}`,children:i.jsx(Oe,{size:20})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Timesheet Report"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Job ID, Worker, Role, Hours, Break Time, Supervisor"})]})]})}),i.jsx("button",{onClick:()=>o("payroll"),className:`p-4 rounded-lg border-2 transition-all text-left ${s==="payroll"?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s==="payroll"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"}`,children:i.jsx(Ee,{size:20})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Payroll Summary"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Date, Event, Worker, Hours, Rate, Total Pay"})]})]})}),i.jsx("button",{onClick:()=>o("worker_hours"),className:`p-4 rounded-lg border-2 transition-all text-left ${s==="worker_hours"?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s==="worker_hours"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:i.jsx(rr,{size:20})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Worker Hours"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total hours by worker for period"})]})]})}),i.jsx("button",{onClick:()=>o("event_summary"),className:`p-4 rounded-lg border-2 transition-all text-left ${s==="event_summary"?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s==="event_summary"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:i.jsx(or,{size:20})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Event Summary"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Complete staffing details by event"})]})]})})]})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Date Range"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last_7_days",label:"Last 7 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"},{value:"custom",label:"Custom Range"}].map(f=>i.jsx("button",{onClick:()=>{a(f.value),f.value!=="custom"&&t({start:O(he(new Date,7),"yyyy-MM-dd"),end:O(new Date,"yyyy-MM-dd")})},className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${n===f.value?"bg-teal-100 text-teal-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f.label},f.value))}),n==="custom"&&i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",value:e.start,onChange:f=>t(j=>({...j,start:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),i.jsx("div",{className:"pt-6",children:i.jsx("span",{className:"text-gray-500",children:"to"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"End Date"}),i.jsx("input",{type:"date",value:e.end,onChange:f=>t(j=>({...j,end:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]}),i.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[i.jsx(ge,{size:16}),i.jsxs("span",{className:"font-medium",children:["Selected Range: ",ye($().start)," - ",ye($().end)]})]})})]}),i.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Optional Filters"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(s==="timesheet"||s==="payroll"||s==="worker_hours")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Filter by Worker (optional)"}),i.jsxs("select",{value:r||"",onChange:f=>l(f.target.value?parseInt(f.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"",children:"All Workers"}),G.map(f=>i.jsx("option",{value:f.id,children:f.name},f.id))]})]}),(s==="timesheet"||s==="payroll"||s==="event_summary")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Filter by Event (optional)"}),i.jsxs("select",{value:d||"",onChange:f=>h(f.target.value?parseInt(f.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"",children:"All Events"}),V.map(f=>i.jsx("option",{value:f.id,children:f.title},f.id))]})]}),(s==="timesheet"||s==="worker_hours")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Filter by Skill (optional)"}),i.jsxs("select",{value:g||"",onChange:f=>E(f.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",children:[i.jsx("option",{value:"",children:"All Skills"}),S.map(f=>i.jsx("option",{value:f,children:f},f))]})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[i.jsxs("button",{onClick:()=>s&&B(s),disabled:U,className:"w-full md:w-auto px-6 py-3 bg-teal-600 text-white font-medium rounded-lg hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[i.jsx(Ye,{size:20}),U?"Exporting...":"Export CSV Report"]}),i.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ze,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-700",children:[i.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Export Information:"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Timesheet Format:"})," Matches your sample exactly (JOB_ID, SKILL_NAME, etc.)"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Break Policy:"})," 30 minutes (0.5 hours) per shift by default"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Hours Calculation:"})," (End Time - Start Time) - Break Time"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Status Filter:"})," Only completed/approved shifts are exported"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Date Format:"})," MM/DD/YYYY, Times in 12-hour format (AM/PM)"]}),i.jsxs("li",{children:["• ",i.jsx("strong",{children:"Overnight Shifts:"})," Use start date for shift date"]})]})]})]})})]})]})]})]}),i.jsxs("div",{className:"mt-8 bg-white border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Report guide"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700",children:[i.jsxs("div",{className:"p-3 rounded border border-gray-200",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Payroll Summary"}),i.jsx("p",{className:"mt-1",children:"One row per worker with hours and payout. Use for payroll runs."})]}),i.jsxs("div",{className:"p-3 rounded border border-gray-200",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Event Summary"}),i.jsx("p",{className:"mt-1",children:"Workers per event and total labor cost. Good for monthly reviews."})]}),i.jsxs("div",{className:"p-3 rounded border border-gray-200",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Weekly Timesheet"}),i.jsx("p",{className:"mt-1",children:"Clock-in/out detail per shift for audit or disputes."})]}),i.jsxs("div",{className:"p-3 rounded border border-gray-200",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Worker Hours"}),i.jsx("p",{className:"mt-1",children:"All shifts for a worker with hours and payout totals."})]})]})]})]}),i.jsx(Be,{isVisible:z.isVisible,message:z.message,type:z.type,onClose:()=>ae({...z,isVisible:!1})})]})}function ve({icon:s,title:o,description:n,color:a,lastExport:e,onExport:t,exporting:r,preview:l,loadingPreview:d,dateRange:h}){const g={teal:"bg-teal-100 text-teal-600",indigo:"bg-indigo-100 text-indigo-600",blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600"};return i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:t,role:"button","aria-label":`${o} quick export`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-lg ${g[a]} flex items-center justify-center`,children:s}),i.jsx("button",{onClick:E=>{E.stopPropagation(),t()},disabled:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition disabled:opacity-50",title:"Quick export",children:i.jsx(Ye,{size:20})})]}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:o}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:n}),l!==void 0&&i.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg space-y-2 border border-gray-200",children:d?i.jsx("div",{className:"text-sm text-gray-500",children:"Loading preview..."}):l?i.jsxs(i.Fragment,{children:[h&&i.jsxs("div",{className:"text-xs text-gray-500 mb-2 pb-2 border-b border-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Date Range:"})," ",ye(h.start)," - ",ye(h.end)]}),i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Approved for Payout:"}),i.jsxs("span",{className:"font-semibold text-green-600",children:["$",fe(l.approved_pay,2,"0.00")," (",fe(l.approved_hours,1,"0.0"),"h)"]})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Pending Approval:"}),i.jsxs("span",{className:"font-semibold text-amber-600",children:["$",fe(l.pending_pay,2,"0.00")," (",fe(l.pending_hours,1,"0.0"),"h)"]})]}),l.no_shows>0&&i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"No-Shows:"}),i.jsxs("span",{className:"font-semibold text-red-600",children:[l.no_shows," ",l.no_shows===1?"worker":"workers"]})]})]}):i.jsx("div",{className:"text-sm text-gray-500",children:"No data available"})}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[i.jsx(ge,{size:16}),i.jsx("span",{children:e})]})]})}export{gt as ReportsPage};
