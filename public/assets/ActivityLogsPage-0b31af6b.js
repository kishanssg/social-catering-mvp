import{r as n,j as e}from"./application.js";import{a as j}from"./api.js";import{L as N,E as _}from"./ErrorMessage2.js";import"./circle-alert.js";import"./createLucideIcon.js";const L=()=>{const[o,p]=n.useState([]),[s,h]=n.useState(null),[y,c]=n.useState(!0),[m,x]=n.useState(null),[a,d]=n.useState({entity_type:"",action:"",page:1}),g=async()=>{try{c(!0),x(null);const t=new URLSearchParams;a.entity_type&&t.append("entity_type",a.entity_type),a.action&&t.append("log_action",a.action),t.append("page",a.page.toString());const r=await j.getActivityLogs(t);r.status==="success"&&(p(r.data.activity_logs),h(r.data.pagination))}catch(t){const r=t.response?.data?.error||"Failed to load activity logs";x(r),console.error("Activity logs fetch error:",t)}finally{c(!1)}};n.useEffect(()=>{g()},[a]);const u=(t,r)=>{d(i=>({...i,[t]:r,page:1}))},l=t=>{d(r=>({...r,page:t}))},b=t=>new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),f=t=>{switch(t){case"created":return"bg-green-100 text-green-800";case"updated":return"bg-blue-100 text-blue-800";case"destroyed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},v=t=>{switch(t){case"Worker":return"ðŸ‘¤";case"Shift":return"ðŸ“…";case"Assignment":return"ðŸ”—";case"User":return"ðŸ‘¨â€ðŸ’¼";default:return"ðŸ“„"}};return y?e.jsx(N,{message:"Loading activity logs..."}):m?e.jsx(_,{message:m,onRetry:g}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Activity Logs"}),e.jsxs("p",{className:"text-gray-600",children:["Track all changes made to the system",s&&` (${s.total_count} total entries)`]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entity Type"}),e.jsxs("select",{value:a.entity_type,onChange:t=>u("entity_type",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"Worker",children:"Workers"}),e.jsx("option",{value:"Shift",children:"Shifts"}),e.jsx("option",{value:"Assignment",children:"Assignments"}),e.jsx("option",{value:"User",children:"Users"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action"}),e.jsxs("select",{value:a.action,onChange:t=>u("action",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"created",children:"Created"}),e.jsx("option",{value:"updated",children:"Updated"}),e.jsx("option",{value:"destroyed",children:"Deleted"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>d({entity_type:"",action:"",page:1}),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-md hover:bg-gray-50",children:"Clear Filters"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"ðŸ“"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No activity logs found"}),e.jsx("p",{className:"text-gray-500",children:a.entity_type||a.action?"Try adjusting your filters to see more results.":"Activity logs will appear here as changes are made to the system."})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:o.map(t=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm",children:v(t.entity_type)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f(t.action)}`,children:t.action}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.entity_type}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",t.entity_id]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:t.actor_user.email})," ","performed this action"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:b(t.created_at)})]})]})},t.id))})}),s&&s.total_pages>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>l(s.current_page-1),disabled:!s.has_prev_page,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>l(s.current_page+1),disabled:!s.has_next_page,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(s.current_page-1)*s.per_page+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(s.current_page*s.per_page,s.total_count)})," ","of"," ",e.jsx("span",{className:"font-medium",children:s.total_count})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>l(s.current_page-1),disabled:!s.has_prev_page,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,s.total_pages)},(t,r)=>{const i=r+1;return e.jsx("button",{onClick:()=>l(i),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${i===s.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:i},i)}),e.jsx("button",{onClick:()=>l(s.current_page+1),disabled:!s.has_next_page,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})]})};export{L as default};
//# sourceMappingURL=/assets/ActivityLogsPage-01fea82a.js.map
