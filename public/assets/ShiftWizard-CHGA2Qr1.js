import{n as b,o as g,j as a,S as j,B as v,q as y,r as w,R as N,s as D}from"./index-CbEdq0wH.js";import{c as I,b as c}from"./vendor-B6rXSep8.js";const R=()=>{const S=I(),{locations:l}=b(),{skills:_}=g(),[s,d]=c.useState(1),[p,m]=c.useState(!1),[t,h]=c.useState({client_name:"",role_needed:"",location_id:null,start_date:"",start_time:"",end_date:"",end_time:"",capacity:1,pay_rate:15,notes:"",status:"draft"}),u=[{number:1,title:"Basic Info"},{number:2,title:"Location"},{number:3,title:"Schedule"},{number:4,title:"Review"}],n=e=>{h(r=>({...r,...e}))},i=()=>{d(e=>Math.min(e+1,u.length))},o=()=>{d(e=>Math.max(e-1,1))},x=async()=>{try{m(!0);const e=new Date(`${t.start_date}T${t.start_time}`),r=new Date(`${t.end_date}T${t.end_time}`),f={client_name:t.client_name,role_needed:t.role_needed,location_id:t.location_id,start_time_utc:e.toISOString(),end_time_utc:r.toISOString(),capacity:t.capacity,pay_rate:t.pay_rate,notes:t.notes,status:t.status};await D(f),S("/shifts")}catch(e){console.error("Failed to create shift:",e),alert("Failed to create shift. Please try again.")}finally{m(!1)}};return a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create New Shift"}),a.jsx(j,{steps:u,currentStep:s}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-8",children:[s===1&&a.jsx(v,{formData:t,updateFormData:n,onNext:i,skills:_.map(e=>e.name)}),s===2&&a.jsx(y,{formData:t,updateFormData:n,onNext:i,onPrevious:o,locations:l}),s===3&&a.jsx(w,{formData:t,updateFormData:n,onNext:i,onPrevious:o}),s===4&&a.jsx(N,{formData:t,updateFormData:n,onPrevious:o,onSubmit:x,isSubmitting:p,locations:l})]})]})};export{R as default};
