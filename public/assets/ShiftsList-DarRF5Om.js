import{j as e,f as k,p as C}from"./index-CWBP06_x.js";import{b as t,L as p}from"./vendor-B6rXSep8.js";import{u as B}from"./useShifts-Cb36RyZD.js";import{F as D,A as E}from"./AssignWorkerModal-BKJZanuT.js";import{B as W}from"./BulkAssignModal-DcYzCHpW.js";import{S as q}from"./ShiftStatusBadge-CYcVMX6E.js";import{F}from"./UsersIcon-Felge1x8.js";import{F as A,a as O,b as P,c as G}from"./MapPinIcon-BneLmYi_.js";import"./workersApi-BkNpv4qr.js";import"./ErrorMessage-BJZZto2i.js";function I({title:a,titleId:d,...r},m){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":d},r),a?t.createElement("title",{id:d},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const _=t.forwardRef(I);function ee(){const[a,d]=t.useState(""),[r,m]=t.useState(""),[l,f]=t.useState(""),[n,j]=t.useState(""),[i,y]=t.useState(""),[N,x]=t.useState(null),[R,u]=t.useState(!1);t.useEffect(()=>{const s=setTimeout(()=>{m(a)},300);return()=>clearTimeout(s)},[a]);const{shifts:h,loading:$,error:v,refetch:w}=B({status:l||void 0,role:n||void 0,start_date:i||void 0}),g=h.filter(s=>s.client_name.toLowerCase().includes(r.toLowerCase())||s.role_needed.toLowerCase().includes(r.toLowerCase())),L=Array.from(new Set(h.map(s=>s.role_needed))),b=s=>{try{return k(C(s),"MMM d, yyyy")}catch{return s}},S=s=>{try{return k(C(s),"h:mm a")}catch{return s}},M=s=>{const c=s.assignments?.length||0,o=s.capacity;return c===0?{text:"No workers",color:"text-red-600"}:c<o?{text:`${c}/${o} assigned`,color:"text-yellow-600"}:{text:"Fully staffed",color:"text-green-600"}};return $?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading shifts..."})}):v?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:v})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Shifts"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage and schedule your shifts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>u(!0),className:"btn-green flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),"Bulk Assign"]}),e.jsxs(p,{to:"/shifts/new",className:"btn-primary flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Create Shift"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search shifts...",value:a,onChange:s=>d(s.target.value),className:"pl-10 pr-4 py-2 w-full input-field","aria-label":"Search shifts by client name or role"})]}),e.jsxs("select",{value:l,onChange:s=>f(s.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"assigned",children:"Assigned"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:n,onChange:s=>j(s.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Roles"}),L.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx("input",{type:"date",value:i,onChange:s=>y(s.target.value),className:"input-field","aria-label":"Filter shifts by date"})]}),(r||l||n||i)&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Active filters:"}),r&&e.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:['Search: "',r,'"']}),l&&e.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Status: ",l]}),n&&e.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Role: ",n]}),i&&e.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Date: ",b(i)]}),e.jsx("button",{onClick:()=>{d(""),f(""),j(""),y("")},className:"text-blue-600 hover:text-blue-700",children:"Clear all"})]})]}),g.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No shifts found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:a||l||n||i?"Try adjusting your filters":"Get started by creating your first shift"}),!a&&!l&&!n&&!i&&e.jsxs(p,{to:"/shifts/new",className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Create First Shift"]})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-200",children:g.map(s=>{const c=M(s),o=s.assignments?.length||0;return e.jsx(p,{to:`/shifts/${s.id}`,className:"block hover:bg-gray-50 transition-colors",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.client_name}),e.jsx(q,{status:s.status})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-3",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.role_needed})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:b(s.start_time_utc)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsxs("span",{children:[S(s.start_time_utc)," - ",S(s.end_time_utc)]})]}),s.location&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:s.location})]}),s.pay_rate&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsxs("span",{children:["$",s.pay_rate,"/hr"]})]})]})]}),e.jsxs("div",{className:"ml-6 text-right flex flex-col items-end gap-2",children:[e.jsx("div",{className:`text-sm font-medium ${c.color}`,children:c.text}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.capacity," ",s.capacity===1?"worker":"workers"," needed"]}),s.status==="published"&&o<s.capacity&&e.jsx("button",{onClick:T=>{T.preventDefault(),x(s)},className:"text-xs btn-primary px-3 py-1",children:"Assign Worker"})]})]})})},s.id)})})}),e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Showing ",g.length," of ",h.length," shifts"]}),N&&e.jsx(E,{shift:N,onClose:()=>x(null),onSuccess:()=>{x(null),w()}}),R&&e.jsx(W,{onClose:()=>u(!1),onSuccess:()=>{w(),u(!1)}})]})}export{ee as default};
