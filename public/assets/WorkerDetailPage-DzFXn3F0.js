import{c as k,a as m,j as e}from"./index-ZW86mhzJ.js";import{g as A,b as P,r as i}from"./vendor-D4VeuP1H.js";import{L as I}from"./LoadingSpinner-D2FXqiPn.js";import{A as W,P as S}from"./phone-DZ9ilX7W.js";import{C as D,X as L,P as M}from"./x-circle-B2yQryUy.js";import{M as g}from"./map-pin-DiBJimv2.js";import{B as $}from"./briefcase-Lso2CH5L.js";import{C as y}from"./calendar-DmhZgaQ1.js";import{C as b,f as N}from"./index-BsWJbyzK.js";import{p as v}from"./index-BkGjr18E.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=k("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=k("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);function K(){const{id:r}=A(),l=P(),[t,w]=i.useState(null),[h,_]=i.useState([]),[C,p]=i.useState(!0),[c,j]=i.useState("upcoming");i.useEffect(()=>{f()},[r]);async function f(){var s;if(r){console.log("Loading worker data for ID:",r,"Type:",typeof r),p(!0);try{const a=await m.get(`/workers/${r}`);console.log("Worker API response:",a.data),a.data.status==="success"&&w(a.data.data.worker);const x=await m.get(`/assignments?worker_id=${r}`);console.log("Assignments API response:",x.data),x.data.status==="success"&&_(x.data.data||[])}catch(a){console.error("Failed to load worker data:",a),console.error("Error details:",(s=a.response)==null?void 0:s.data)}finally{p(!1)}}}async function z(){if(t)try{(await m({method:"PATCH",url:`/workers/${r}`,data:{worker:{active:!t.active}}})).data.status==="success"&&f()}catch(s){console.error("Failed to update worker status:",s),alert("Failed to update worker status")}}if(C)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(I,{})});if(!r)return e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"❌"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Invalid Worker ID"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No worker ID provided in the URL."}),e.jsx("button",{onClick:()=>l("/workers"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition",children:"Back to Workers"})]})});if(!t)return e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"❌"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Worker Not Found"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:['Worker with ID "',r,'" could not be found.']}),e.jsx("button",{onClick:()=>l("/workers"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition",children:"Back to Workers"})]})});const d=h.filter(s=>!s.is_completed),o=h.filter(s=>s.is_completed),n=s=>N(v(s),"MMM d, yyyy"),u=s=>N(v(s),"h:mm a");return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-8",children:[e.jsxs("button",{onClick:()=>l("/workers"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition",children:[e.jsx(W,{size:20}),"Back to Workers"]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 text-2xl font-semibold",children:[t.first_name[0],t.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-900",children:[t.first_name," ",t.last_name]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[t.active?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:[e.jsx(D,{size:14}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-gray-100 text-gray-600 text-sm font-medium rounded-full",children:[e.jsx(L,{size:14}),"Inactive"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Joined ",n(t.created_at)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:z,className:`px-4 py-2 text-sm font-medium rounded-lg transition ${t.active?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:t.active?"Deactivate":"Activate"}),e.jsxs("button",{onClick:()=>l(`/workers/${r}/edit`),className:"px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition flex items-center gap-2",children:[e.jsx(M,{size:16}),"Edit"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(T,{size:18,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.email})]})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(S,{size:18,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.phone})]})]}),(t.address_line1||t.address_line2)&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(g,{size:18,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Address"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.address_line1,t.address_line2&&`, ${t.address_line2}`]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Skills"}),t.skills_json&&t.skills_json.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:t.skills_json.map((s,a)=>e.jsx("span",{className:"px-3 py-1.5 bg-teal-100 text-teal-700 text-sm font-medium rounded-lg",children:s},a))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No skills added yet"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Certifications"}),t.certifications&&t.certifications.length>0?e.jsx("div",{className:"space-y-2",children:t.certifications.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{size:16,className:"text-teal-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name})]}),s.expires_at_utc&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Exp: ",n(s.expires_at_utc)]})]},s.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No certifications added yet"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 px-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("button",{onClick:()=>j("upcoming"),className:`py-4 px-1 font-medium transition-colors border-b-2 ${c==="upcoming"?"border-teal-600 text-teal-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Upcoming (",d.length,")"]}),e.jsxs("button",{onClick:()=>j("past"),className:`py-4 px-1 font-medium transition-colors border-b-2 ${c==="past"?"border-teal-600 text-teal-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Past (",o.length,")"]})]})}),e.jsx("div",{className:"p-6",children:c==="upcoming"?d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($,{size:48,className:"mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No upcoming assignments"})]}):e.jsx("div",{className:"space-y-3",children:d.map(s=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.event.title}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:s.shift.role_needed})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{size:14}),n(s.shift.start_time_utc)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{size:14}),u(s.shift.start_time_utc)," - ",u(s.shift.end_time_utc)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{size:14}),s.shift.location]})]})]},s.id))}):o.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(b,{size:48,className:"mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No past assignments"})]}):e.jsx("div",{className:"space-y-3",children:o.map(s=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.event.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded",children:s.shift.role_needed}),s.hours_worked&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded",children:[s.hours_worked," hrs"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{size:14}),n(s.shift.start_time_utc)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{size:14}),s.shift.location]})]})]},s.id))})})]})]})})}export{K as WorkerDetailPage};
