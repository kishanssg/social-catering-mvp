import{a as k,j as e}from"./index-CHlUjhV3.js";import{g as M,c as R,r as o}from"./vendor-Z5FP5jVZ.js";import{L as B}from"./LoadingSpinner-BGFu4S-a.js";import{c as T,d as p,b as w,a as _,e as C,p as S}from"./Prep Cook-BWnRWvdv.js";import{C as z}from"./chevron-right-DwF3fd6K.js";import{U as D}from"./user-Ca9CpMWS.js";import{c as U}from"./createLucideIcon-VuOQmetB.js";import{X as q,P as G}from"./x-Ie4PY792.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=U("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),$=["Food Handler Certificate","ServSafe Manager","TIPS Certification","Alcohol Service License","SafeStaff","CPR Certified","First Aid Certified"];function se(){const{id:c}=M(),m=R(),d=!!c,[n,F]=o.useState("details"),[f,h]=o.useState(!1),[P,u]=o.useState(!1),[g,b]=o.useState(!1),[j,v]=o.useState(!1),[r,i]=o.useState({first_name:"",last_name:"",email:"",phone:"123-456-7890",address_line1:"",address_line2:"",profile_photo_url:"",skills:[],certifications:[]}),y=[{name:"Bartender",icon:p},{name:"Banquet Server/Runner",icon:w},{name:"Captain",icon:_},{name:"Event Helper",icon:C},{name:"Prep Cook",icon:S}],W=s=>({Bartender:p,"Banquet Server/Runner":w,Captain:_,"Event Helper":C,"Prep Cook":S})[s]||p;o.useEffect(()=>{d&&I()},[c]);async function I(){var s;u(!0);try{const a=await k.get(`/workers/${c}`);if(a.data.status==="success"){const t=a.data.data.worker;i({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",phone:t.phone||"123-456-7890",address_line1:t.address_line1||"",address_line2:t.address_line2||"",profile_photo_url:t.profile_photo_url||"",skills:t.skills_json||[],certifications:((s=t.certifications)==null?void 0:s.map(l=>({name:l.name,expires_at_utc:l.expires_at_utc?l.expires_at_utc.split("T")[0]:""})))||[]})}}catch(a){console.error("Failed to load worker:",a)}finally{u(!1)}}async function L(){var s;h(!0);try{const a=d?"PATCH":"POST",t=d?`/workers/${c}`:"/workers",l=await k({method:a,url:t,data:{worker:{first_name:r.first_name,last_name:r.last_name,email:r.email,phone:r.phone,address_line1:r.address_line1,address_line2:r.address_line2,profile_photo_url:r.profile_photo_url,skills_json:r.skills,active:!0,certifications_attributes:r.certifications.map(N=>({name:N.name,expires_at_utc:N.expires_at_utc||null}))}}});l.data.status==="success"?m("/workers"):alert(((s=l.data.errors)==null?void 0:s.join(", "))||"Failed to save worker")}catch(a){console.error("Failed to save worker:",a),alert("Failed to save worker")}finally{h(!1)}}const E=$.filter(s=>!r.certifications.some(a=>a.name===s)),x=[{id:1,title:"Add New Worker",description:"Invite a new user to join as a Worker.",completed:n==="skills",active:n==="details"},{id:2,title:"Add Skills",description:"Specify Worker's Skills.",completed:!1,active:n==="skills"}],A=()=>n==="details"?r.first_name.trim()&&r.last_name.trim()&&r.email.trim():!0,H=()=>{n==="details"?F("skills"):L()};return P?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(B,{})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("button",{onClick:()=>m("/workers"),className:"hover:text-gray-900 transition",children:"Workers"}),e.jsx(z,{size:16}),e.jsx("span",{className:"text-gray-900",children:d?"Edit Worker":"Add New Worker"})]})})}),e.jsxs("div",{className:"flex flex-1 justify-center gap-12 px-8 min-h-0",style:{paddingTop:"80px",paddingBottom:"40px"},children:[e.jsx("div",{className:"w-[280px] flex-shrink-0 self-start",children:x.map((s,a)=>e.jsxs("div",{className:"flex gap-4",style:{minHeight:a<x.length-1?"100px":"auto"},children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full flex-shrink-0",style:{backgroundColor:s.completed?"#FFFFFF":s.active?"#000000":"transparent",border:s.completed||s.active?"2px solid #000000":"0.8px solid #292826",boxShadow:s.active||s.completed?"0 2px 8px 0 rgba(0,0,0,0.04)":"none"},children:s.completed?e.jsx("img",{src:T,width:"18",height:"18",alt:"Completed",className:"flex-shrink-0"}):s.active?e.jsx("div",{className:"rounded-full bg-white",style:{width:"12px",height:"12px"}}):null}),a<x.length-1&&e.jsx("div",{className:"flex-1",style:{width:"2px",backgroundColor:"rgba(0,0,0,0.5)"}})]}),e.jsxs("div",{className:"flex flex-col gap-1 pt-1",children:[e.jsx("span",{className:"text-sm font-bold font-manrope leading-[140%] text-font-primary",children:s.title}),e.jsx("span",{className:"text-sm font-normal font-manrope leading-[140%] text-font-secondary",children:s.description})]})]},s.id))}),e.jsxs("div",{className:"flex flex-col p-8 rounded-lg border border-primary-color/10 bg-white self-start overflow-visible",style:{boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)",maxWidth:"850px",width:"100%",minHeight:"600px"},children:[e.jsx("div",{className:"flex flex-col gap-6 flex-1 overflow-visible pr-2",style:{fontFamily:"Manrope, sans-serif"},children:n==="details"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx("h2",{className:"text-xl font-bold text-font-primary",children:"Worker Details"})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-font-primary",children:"Phone number"}),e.jsx("input",{type:"tel",value:r.phone,onChange:s=>i({...r,phone:s.target.value}),className:"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"123-456-7890"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-font-primary",children:"First name"}),e.jsx("input",{type:"text",value:r.first_name,onChange:s=>i({...r,first_name:s.target.value}),className:"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"First name"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-font-primary",children:"Last name"}),e.jsx("input",{type:"text",value:r.last_name,onChange:s=>i({...r,last_name:s.target.value}),className:"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Last name"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-font-primary",children:"Email address"}),e.jsx("input",{type:"email",value:r.email,onChange:s=>i({...r,email:s.target.value}),className:"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Email address"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-font-primary",children:"Home address"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("input",{type:"text",value:r.address_line1,onChange:s=>i({...r,address_line1:s.target.value}),className:"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Address line 1"}),e.jsx("input",{type:"text",value:r.address_line2,onChange:s=>i({...r,address_line2:s.target.value}),className:"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent",placeholder:"Address line 2"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-font-primary",children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-300 rounded-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(D,{size:24,className:"text-gray-500"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-2",children:[e.jsx(O,{size:16}),"Upload Photo"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"JPG, PNG up to 2MB"})]})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx("h2",{className:"text-xl font-bold text-font-primary",children:"Worker Skills"})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("label",{className:"text-sm font-semibold font-manrope leading-[140%] text-font-primary",children:"Skills"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between h-11 px-4 rounded-lg border border-primary-color/10 bg-white cursor-pointer hover:border-primary-color/30 transition-colors",onClick:()=>b(!g),children:[e.jsx("span",{className:"text-sm font-normal font-manrope leading-[140%] text-primary-color",children:r.skills.length>0?r.skills.join(", "):"Pick the Skills the Worker Has"}),e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4 6L8 10L12 6",stroke:"#292826",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),g&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-primary-color/10 rounded-lg shadow-lg z-50 max-h-[200px] overflow-y-auto",children:[y.filter(s=>!r.skills.includes(s.name)).map(s=>e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 cursor-pointer hover:bg-gray-50",onClick:()=>{i({...r,skills:[...r.skills,s.name]}),b(!1)},children:[e.jsx("img",{src:s.icon,width:"20",height:"20",alt:s.name,className:"flex-shrink-0",style:{imageRendering:"crisp-edges"}}),e.jsx("span",{className:"text-sm font-normal font-manrope leading-[140%] text-font-primary",children:s.name})]},s.name)),r.skills.length===y.length&&e.jsx("div",{className:"px-3 py-2.5 text-sm text-gray-500 text-center",children:"All skills selected"})]})]}),r.skills.length>0&&e.jsx("div",{className:"flex flex-col gap-3",children:r.skills.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-primary-color/10 bg-white",style:{boxShadow:"0 1px 2px rgba(0,0,0,0.06)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:W(s),width:"24",height:"24",alt:s,className:"flex-shrink-0",style:{imageRendering:"crisp-edges"}}),e.jsx("span",{className:"text-sm font-semibold font-manrope leading-[140%] text-font-primary",children:s})]}),e.jsx("button",{onClick:()=>i({...r,skills:r.skills.filter(a=>a!==s)}),className:"flex items-center justify-center w-6 h-6 text-red-500 hover:bg-red-50 rounded",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 4L4 12M4 4L12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},s))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-font-primary",children:"Certifications"}),e.jsx("div",{className:"space-y-3",children:r.certifications.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:s.name,onChange:t=>{const l=[...r.certifications];l[a].name=t.target.value,i({...r,certifications:l})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Certification name"})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"date",value:s.expires_at_utc,onChange:t=>{const l=[...r.certifications];l[a].expires_at_utc=t.target.value,i({...r,certifications:l})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})}),e.jsx("button",{onClick:()=>i({...r,certifications:r.certifications.filter((t,l)=>l!==a)}),className:"text-red-600 hover:text-red-800",children:e.jsx(q,{size:16})})]},a))}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>v(!j),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:[e.jsx(G,{size:16}),e.jsx("span",{children:"Add Certification"})]}),j&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10",children:E.map(s=>e.jsx("button",{onClick:()=>{i({...r,certifications:[...r.certifications,{name:s,expires_at_utc:""}]}),v(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg",children:s},s))})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>m("/workers"),className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),e.jsx("button",{onClick:H,disabled:!A()||f,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:f?"Saving...":n==="details"?"Continue":d?"Update Worker":"Create Worker"})]})]})]})]})}export{se as WorkerCreatePage};
