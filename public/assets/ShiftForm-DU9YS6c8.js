import{h as _,j as e,e as S,m as w}from"./index-DTje2KhU.js";import{u as C,e as D,b as o}from"./vendor-7daYTdBd.js";import{F as k,a as F}from"./DocumentTextIcon-CFbPHbSf.js";import{F as E}from"./UsersIcon-B0PaAKke.js";import{F as j,a as g,b as R,c as $,d as q}from"./MapPinIcon-sNr2BJFd.js";function O(){const c=C(),{id:l}=D(),n=!!l,[h,x]=o.useState(!1),[b,y]=o.useState(n),[u,m]=o.useState(""),[t,p]=o.useState({client_name:"",role_needed:"",start_date:"",start_time:"",end_date:"",end_time:"",capacity:1,location:"",pay_rate:"",notes:"",status:"draft"});o.useEffect(()=>{n&&l&&v(parseInt(l))},[l,n]);const v=async d=>{try{const a=(await _(d)).data.shift,r=new Date(a.start_time_utc),f=new Date(a.end_time_utc);p({client_name:a.client_name,role_needed:a.role_needed,start_date:r.toISOString().split("T")[0],start_time:r.toTimeString().slice(0,5),end_date:f.toISOString().split("T")[0],end_time:f.toTimeString().slice(0,5),capacity:a.capacity,location:a.location||"",pay_rate:a.pay_rate?.toString()||"",notes:a.notes||"",status:a.status})}catch(i){m("Failed to load shift"),console.error("Error loading shift:",i)}finally{y(!1)}},N=async d=>{d.preventDefault(),x(!0),m("");try{const i=new Date(`${t.start_date}T${t.start_time}:00`).toISOString(),a=new Date(`${t.end_date}T${t.end_time}:00`).toISOString(),r={client_name:t.client_name,role_needed:t.role_needed,start_time_utc:i,end_time_utc:a,capacity:parseInt(String(t.capacity)),location:t.location||void 0,pay_rate:t.pay_rate?parseFloat(t.pay_rate):void 0,notes:t.notes||void 0,status:t.status};n&&l?await S(parseInt(l),r):await w(r),c("/shifts")}catch(i){m(i?.response?.data?.error||"Failed to save shift"),console.error("Error saving shift:",i)}finally{x(!1)}},s=d=>{const{name:i,value:a}=d.target;p(r=>({...r,[i]:a}))};return b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading shift..."})}):e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>c("/shifts"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(k,{className:"h-5 w-5"}),"Back to Shifts"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Edit Shift":"Create New Shift"}),e.jsx("p",{className:"text-gray-500 mt-1",children:n?"Update shift details":"Schedule a new shift for your team"})]}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:u})}),e.jsxs("form",{onSubmit:N,className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name *"}),e.jsx("input",{type:"text",name:"client_name",value:t.client_name,onChange:s,required:!0,className:"input-field",placeholder:"e.g., Marriott Hotel Downtown"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Needed *"}),e.jsxs("select",{name:"role_needed",value:t.role_needed,onChange:s,required:!0,className:"input-field",children:[e.jsx("option",{value:"",children:"Select a role"}),e.jsx("option",{value:"Server",children:"Server"}),e.jsx("option",{value:"Bartender",children:"Bartender"}),e.jsx("option",{value:"Chef",children:"Chef"}),e.jsx("option",{value:"Dishwasher",children:"Dishwasher"}),e.jsx("option",{value:"Event Coordinator",children:"Event Coordinator"}),e.jsx("option",{value:"Prep Cook",children:"Prep Cook"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(E,{className:"inline h-4 w-4 mr-1"})," Workers Needed *"]}),e.jsx("input",{type:"number",name:"capacity",value:t.capacity,onChange:s,required:!0,min:1,className:"input-field"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(j,{className:"inline h-4 w-4 mr-1"})," Start Date *"]}),e.jsx("input",{type:"date",name:"start_date",value:t.start_date,onChange:s,required:!0,className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(g,{className:"inline h-4 w-4 mr-1"})," Start Time *"]}),e.jsx("input",{type:"time",name:"start_time",value:t.start_time,onChange:s,required:!0,className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(j,{className:"inline h-4 w-4 mr-1"})," End Date *"]}),e.jsx("input",{type:"date",name:"end_date",value:t.end_date,onChange:s,required:!0,className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(g,{className:"inline h-4 w-4 mr-1"})," End Time *"]}),e.jsx("input",{type:"time",name:"end_time",value:t.end_time,onChange:s,required:!0,className:"input-field"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(R,{className:"inline h-4 w-4 mr-1"})," Location"]}),e.jsx("input",{type:"text",name:"location",value:t.location,onChange:s,className:"input-field",placeholder:"e.g., 123 Main St, Downtown"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx($,{className:"inline h-4 w-4 mr-1"})," Pay Rate (per hour)"]}),e.jsx("input",{type:"number",name:"pay_rate",value:t.pay_rate,onChange:s,step:"0.01",min:0,className:"input-field",placeholder:"e.g., 25.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text sm font-medium text-gray-700 mb-2",children:[e.jsx(F,{className:"inline h-4 w-4 mr-1"})," Notes"]}),e.jsx("textarea",{name:"notes",value:t.notes,onChange:s,rows:4,className:"input-field",placeholder:"Any special instructions or requirements..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{name:"status",value:t.status,onChange:s,className:"input-field",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"assigned",children:"Assigned"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Draft shifts are not visible to workers"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-lg flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>c("/shifts"),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:h,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"})," ",h?"Saving...":n?"Update Shift":"Create Shift"]})]})]})]})}export{O as default};
