## Admin Accounts

The system has 4 active admin accounts for Social Catering operations:

### Production Accounts

| Email | Name | Role | Initial Password |
|-------|------|------|------------------|
| natalie@socialcatering.com | Natalie | Operations Manager | password123 |
| madison@socialcatering.com | Madison | Operations Manager | password123 |
| sarah@socialcatering.com | Sarah | Operations Manager | password123 |
| gravyadmin@socialcatering.com | System Admin | Testing/Backup | password123 |

### Important Notes

- ‚ö†Ô∏è Change password on first login
- ‚úÖ Admin access for all accounts (no role differentiation yet)
- ‚úÖ Same accounts on staging and production
- ‚ùå `admin@socialcatering.com` has been removed

### Create/Remove/Reset

```bash
# Verify
heroku run rails runner scripts/verify_admin_accounts.rb -a sc-mvp-staging
heroku run rails runner scripts/verify_admin_accounts.rb -a sc-mvp-production

# Create (in console)
User.create!(email: 'newadmin@socialcatering.com', password: 'TempPassword123!', password_confirmation: 'TempPassword123!')

# Remove
user = User.find_by(email: 'oldadmin@socialcatering.com'); user&.destroy

# Reset password
user = User.find_by(email: 'natalie@socialcatering.com'); user.update(password: 'NewTemp123!', password_confirmation: 'NewTemp123!')
```

# Social Catering MVP - Environment Configuration

**Purpose:** Documentation of all environment variables used in the Social Catering MVP application  
**Security Note:** ‚ö†Ô∏è **NEVER commit actual secret values to git.** This document lists variable names and purposes only.

---

## üìã Overview

The application uses environment variables for configuration across development, staging, and production environments. These variables are managed differently per environment:

- **Local Development:** `.env` files (not committed to git)
- **Heroku Staging:** Heroku config vars
- **Heroku Production:** Heroku config vars

---

## üîê Required Variables

### Backend (Rails)

#### `RAILS_ENV`
- **Description:** Rails environment (development, staging, production)
- **Required:** Yes
- **Values:** `development` | `staging` | `production`
- **Example:** `production`
- **Where Used:** Rails configuration, database connections
- **Set By:** Heroku automatically sets to `production` for Heroku apps

#### `RAILS_MASTER_KEY`
- **Description:** Master key for decrypting Rails credentials
- **Required:** Yes (for production/staging)
- **Example:** `abc123...` (32+ characters)
- **Where Used:** `config/credentials.yml.enc` decryption
- **Security:** ‚ö†Ô∏è **CRITICAL SECRET** - Never expose in logs or git
- **Set By:** Generated by `rails credentials:edit`, stored in `config/master.key` (gitignored)

#### `SECRET_KEY_BASE`
- **Description:** Secret key for Rails session encryption
- **Required:** Yes (for production/staging)
- **Example:** `xyz789...` (64+ characters)
- **Where Used:** Session management, CSRF tokens
- **Security:** ‚ö†Ô∏è **CRITICAL SECRET** - Never expose
- **Set By:** Generated by `rails secret`, or set via Heroku config

#### `DATABASE_URL`
- **Description:** PostgreSQL connection string
- **Required:** Yes
- **Format:** `postgres://user:password@host:port/database`
- **Example:** `postgres://user:pass@ec2-xxx.compute-1.amazonaws.com:5432/dbname`
- **Where Used:** Database connections (`config/database.yml`)
- **Set By:** Heroku automatically sets for PostgreSQL addons
- **Note:** Do NOT manually set - Heroku manages this

#### `RAILS_LOG_TO_STDOUT`
- **Description:** Enable logging to stdout (required for Heroku)
- **Required:** Yes (for Heroku)
- **Values:** `enabled` | `disabled`
- **Example:** `enabled`
- **Where Used:** Logging configuration
- **Set By:** Heroku config or `.env` for local

#### `RAILS_SERVE_STATIC_FILES`
- **Description:** Allow Rails to serve static files (frontend assets)
- **Required:** Yes (for Heroku)
- **Values:** `enabled` | `disabled`
- **Example:** `enabled`
- **Where Used:** Asset serving in production
- **Set By:** Heroku config

### Frontend (React/Vite)

#### `VITE_API_URL`
- **Description:** Base URL for API requests from frontend
- **Required:** Yes (for production/staging)
- **Format:** Full URL with protocol and domain
- **Examples:**
  - Development: `http://localhost:3001/api/v1`
  - Staging: `https://sc-mvp-staging.herokuapp.com/api/v1`
  - Production: `https://sc-mvp-production-6b7a268cc8ad.herokuapp.com/api/v1`
- **Where Used:** Frontend API client (`social-catering-ui/src/lib/api.ts`)
- **Set By:** Vite environment variable (requires `VITE_` prefix)
- **Note:** For local dev, Vite proxy handles this automatically

#### `NODE_ENV`
- **Description:** Node.js environment
- **Required:** Yes
- **Values:** `development` | `production`
- **Example:** `production`
- **Where Used:** Vite build configuration, React optimizations
- **Set By:** Heroku automatically sets to `production`

---

## üéØ Optional Variables

### Backend

#### `SMTP_HOST`
- **Description:** SMTP server for email delivery
- **Required:** No (only if email features enabled)
- **Example:** `smtp.gmail.com`
- **Where Used:** ActionMailer configuration
- **Default:** None (emails disabled if not set)

#### `SMTP_PORT`
- **Description:** SMTP server port
- **Required:** No
- **Example:** `587` (TLS) or `465` (SSL)
- **Where Used:** ActionMailer configuration
- **Default:** `587`

#### `SMTP_USERNAME`
- **Description:** SMTP authentication username
- **Required:** No
- **Example:** `noreply@socialcatering.com`
- **Where Used:** ActionMailer authentication
- **Security:** ‚ö†Ô∏è **SECRET** - Never expose

#### `SMTP_PASSWORD`
- **Description:** SMTP authentication password
- **Required:** No
- **Example:** `your-email-password`
- **Where Used:** ActionMailer authentication
- **Security:** ‚ö†Ô∏è **CRITICAL SECRET** - Never expose

#### `GOOGLE_PLACES_API_KEY`
- **Description:** Google Places API key for venue search
- **Required:** No (only if venue search enabled)
- **Example:** `AIzaSy...` (39+ characters)
- **Where Used:** `app/services/google_places_service.rb`
- **Security:** ‚ö†Ô∏è **API KEY** - Restrict to specific domains/IPs in Google Cloud Console

#### `SENTRY_DSN`
- **Description:** Sentry error tracking DSN
- **Required:** No (only if error tracking enabled)
- **Example:** `https://xxx@sentry.io/xxx`
- **Where Used:** Error tracking (if Sentry gem configured)
- **Security:** ‚ö†Ô∏è **SENSITIVE** - Don't expose publicly

### Frontend

#### `VITE_GOOGLE_PLACES_API_KEY`
- **Description:** Google Places API key (if used client-side)
- **Required:** No
- **Example:** `AIzaSy...`
- **Where Used:** Frontend Google Places integration (if any)
- **Security:** ‚ö†Ô∏è **API KEY** - Restrict in Google Cloud Console

---

## üåç Environment-Specific Configuration

### Local Development

**File:** `.env` (create from `.env.example` if exists)

```bash
# Backend
RAILS_ENV=development
DATABASE_URL=postgres://localhost:5432/social_catering_development
SECRET_KEY_BASE=development_secret_key_base_here
RAILS_LOG_TO_STDOUT=enabled

# Frontend (optional - Vite proxy handles this)
VITE_API_URL=http://localhost:3001/api/v1
```

**Note:** `.env` files are gitignored. Never commit secrets.

### Staging (Heroku)

**App:** `sc-mvp-staging`

```bash
# View all config vars
heroku config -a sc-mvp-staging

# Set a config var
heroku config:set VARIABLE_NAME=value -a sc-mvp-staging

# Get a config var
heroku config:get VARIABLE_NAME -a sc-mvp-staging
```

**Required Variables:**
- `RAILS_ENV=staging` (or `production`)
- `RAILS_MASTER_KEY` (from `config/master.key`)
- `SECRET_KEY_BASE` (generate with `rails secret`)
- `DATABASE_URL` (auto-set by Heroku Postgres)
- `RAILS_LOG_TO_STDOUT=enabled`
- `RAILS_SERVE_STATIC_FILES=enabled`
- `NODE_ENV=production`
- `VITE_API_URL=https://sc-mvp-staging.herokuapp.com/api/v1`

### Production (Heroku)

**App:** `sc-mvp-production`

```bash
# View all config vars
heroku config -a sc-mvp-production

# Set a config var
heroku config:set VARIABLE_NAME=value -a sc-mvp-production
```

**Required Variables:**
- `RAILS_ENV=production`
- `RAILS_MASTER_KEY` (from `config/master.key`)
- `SECRET_KEY_BASE` (generate with `rails secret`)
- `DATABASE_URL` (auto-set by Heroku Postgres Standard-0)
- `RAILS_LOG_TO_STDOUT=enabled`
- `RAILS_SERVE_STATIC_FILES=enabled`
- `NODE_ENV=production`
- `VITE_API_URL=https://sc-mvp-production-6b7a268cc8ad.herokuapp.com/api/v1`

**‚ö†Ô∏è CRITICAL:** Production secrets must be different from staging.

---

## üîÑ Managing Variables

### Setting Variables in Heroku

```bash
# Set single variable
heroku config:set VARIABLE_NAME=value -a sc-mvp-production

# Set multiple variables
heroku config:set \
  VAR1=value1 \
  VAR2=value2 \
  -a sc-mvp-production

# Remove variable
heroku config:unset VARIABLE_NAME -a sc-mvp-production
```

### Exporting Variables

```bash
# Export all config vars (excluding DATABASE_URL)
heroku config -a sc-mvp-production --shell | \
  grep -vE '^(DATABASE_URL|HEROKU_POSTGRESQL|LANG|RACK_ENV)=' > production-config.env

# Review before applying to another environment
cat production-config.env
```

### Rotating Secrets

**When to Rotate:**
- Security breach suspected
- Key exposed in logs/git
- Quarterly rotation (best practice)

**Steps:**
1. Generate new secret: `rails secret`
2. Update Heroku config: `heroku config:set SECRET_KEY_BASE=new_secret -a sc-mvp-production`
3. Restart dynos: `heroku restart -a sc-mvp-production`
4. Verify: Test login and API functionality

**‚ö†Ô∏è WARNING:** Rotating `SECRET_KEY_BASE` will invalidate all existing sessions. Users will need to log in again.

---

## üîç Verifying Configuration

### Check Backend Config

```bash
# Production
heroku run rails runner "
  puts 'RAILS_ENV: ' + Rails.env
  puts 'DATABASE_URL: ' + (ENV['DATABASE_URL'] ? 'SET' : 'NOT SET')
  puts 'SECRET_KEY_BASE: ' + (ENV['SECRET_KEY_BASE'] ? 'SET' : 'NOT SET')
" -a sc-mvp-production
```

### Check Frontend Config

```bash
# View frontend environment (if accessible)
heroku run 'cat .env 2>/dev/null || echo "No .env file"' -a sc-mvp-production
```

**Note:** Frontend config is baked into build at build time. Changes require rebuild.

### Verify Required Variables

```bash
# Production checklist
heroku config -a sc-mvp-production | grep -E '(RAILS_ENV|SECRET_KEY_BASE|DATABASE_URL|RAILS_LOG_TO_STDOUT|RAILS_SERVE_STATIC_FILES|NODE_ENV)'
```

**Expected:** All should show values (not empty).

---

## üìù Variable Reference Table

| Variable | Required | Environment | Security | Auto-Set |
|----------|----------|-------------|----------|----------|
| `RAILS_ENV` | ‚úÖ | All | No | Heroku |
| `RAILS_MASTER_KEY` | ‚úÖ | Prod/Staging | ‚ö†Ô∏è Critical | No |
| `SECRET_KEY_BASE` | ‚úÖ | Prod/Staging | ‚ö†Ô∏è Critical | No |
| `DATABASE_URL` | ‚úÖ | All | ‚ö†Ô∏è Sensitive | Heroku |
| `RAILS_LOG_TO_STDOUT` | ‚úÖ | Heroku | No | No |
| `RAILS_SERVE_STATIC_FILES` | ‚úÖ | Heroku | No | No |
| `NODE_ENV` | ‚úÖ | All | No | Heroku |
| `VITE_API_URL` | ‚úÖ | Prod/Staging | No | No |
| `SMTP_HOST` | ‚ùå | Optional | No | No |
| `SMTP_USERNAME` | ‚ùå | Optional | ‚ö†Ô∏è Secret | No |
| `SMTP_PASSWORD` | ‚ùå | Optional | ‚ö†Ô∏è Critical | No |
| `GOOGLE_PLACES_API_KEY` | ‚ùå | Optional | ‚ö†Ô∏è API Key | No |
| `SENTRY_DSN` | ‚ùå | Optional | ‚ö†Ô∏è Sensitive | No |

---

## üö® Security Best Practices

1. **Never Commit Secrets:**
   - Use `.gitignore` for `.env` files
   - Never commit `config/master.key`
   - Review `.gitignore` before commits

2. **Use Different Secrets per Environment:**
   - Production secrets ‚â† Staging secrets
   - Rotate secrets if exposed

3. **Restrict API Keys:**
   - Google Places API: Restrict to specific domains
   - Sentry: Use project-specific DSNs

4. **Audit Regularly:**
   - Review config vars quarterly
   - Remove unused variables
   - Rotate secrets annually

5. **Access Control:**
   - Limit Heroku account access
   - Use 2FA for Heroku accounts
   - Review access logs

---

## üìö Additional Resources

- **Rails Credentials:** `rails credentials:edit`
- **Heroku Config Vars:** https://devcenter.heroku.com/articles/config-vars
- **Vite Environment Variables:** https://vitejs.dev/guide/env-and-mode.html
- **PostgreSQL Connection Strings:** https://www.postgresql.org/docs/current/libpq-connect.html

---

**Last Updated:** November 2025  
**Security Note:** This document does NOT contain actual secret values. Always use Heroku config vars or secure secret management.

For deployment procedures, see `docs/RUNBOOK.md`.  
For API reference, see `docs/API_DOCUMENTATION.md`.

